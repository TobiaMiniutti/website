<!doctype html>
<html lang="it">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>4D Candy Lab ‚Äî Caramelle ‚Äúda sbucciare‚Äù</title>
  <meta name="description" content="Sito demo super candy: stile 4D, gummy, frutta peel, glow neon. Shop + filtri + carrello demo." />
  <meta name="theme-color" content="#0a0613" />

  <style>
    :root{
      --bg0:#070311;
      --bg1:#0a0613;
      --bg2:#0f0720;

      --text: rgba(255,255,255,.94);
      --muted: rgba(255,255,255,.70);
      --muted2: rgba(255,255,255,.52);

      --line: rgba(255,255,255,.10);
      --card: rgba(255,255,255,.06);
      --card2: rgba(255,255,255,.10);

      --r16:16px;
      --r22:22px;
      --r28:28px;

      /* Candy neon */
      --pink:#ff3bd4;
      --purple:#7a5cff;
      --cyan:#2fe9ff;
      --lime:#2ee9a6;
      --mango:#ffb020;

      --shadow: 0 18px 70px rgba(0,0,0,.58);
      --font: ui-sans-serif, system-ui, -apple-system, Segoe UI, Roboto, Helvetica, Arial, "Apple Color Emoji","Segoe UI Emoji";
      --mono: ui-monospace, SFMono-Regular, Menlo, Monaco, Consolas, "Liberation Mono", "Courier New", monospace;
    }

    *{box-sizing:border-box}
    html,body{height:100%}
    body{
      margin:0;
      font-family:var(--font);
      color:var(--text);
      background:
        radial-gradient(900px 600px at 12% 10%, rgba(255,59,212,.22), transparent 60%),
        radial-gradient(760px 560px at 90% 15%, rgba(122,92,255,.20), transparent 62%),
        radial-gradient(760px 520px at 70% 90%, rgba(47,233,255,.14), transparent 64%),
        radial-gradient(700px 520px at 20% 90%, rgba(46,233,166,.14), transparent 60%),
        linear-gradient(180deg, var(--bg0), var(--bg2));
      overflow-x:hidden;
    }

    a{color:inherit; text-decoration:none}
    .container{width:min(1120px, calc(100% - 40px)); margin-inline:auto}

    /* Floating gummy bubbles */
    .bubble{
      position:absolute;
      width: 110px; height: 110px;
      border-radius: 999px;
      background:
        radial-gradient(circle at 30% 30%, rgba(255,255,255,.30), transparent 45%),
        radial-gradient(circle at 60% 65%, rgba(255,255,255,.10), transparent 55%),
        linear-gradient(135deg, rgba(255,59,212,.22), rgba(122,92,255,.18));
      border: 1px solid rgba(255,255,255,.12);
      box-shadow: 0 24px 80px rgba(0,0,0,.35);
      filter: blur(.2px);
      opacity:.9;
      animation: floaty 9s ease-in-out infinite;
      pointer-events:none;
    }
    .bubble.b1{top:120px; left:-30px; transform: scale(1.1)}
    .bubble.b2{top:70px; right:-35px; transform: scale(.95); animation-duration: 11s}
    .bubble.b3{bottom:80px; right:-30px; transform: scale(1.25); animation-duration: 12s}
    .bubble.b4{bottom:140px; left:30px; transform: scale(.85); animation-duration: 10s}
    @keyframes floaty{
      0%,100%{transform: translateY(0) translateX(0) scale(var(--s,1))}
      50%{transform: translateY(-14px) translateX(10px) scale(var(--s,1))}
    }

    /* Header */
    header{
      position:sticky; top:0; z-index:50;
      backdrop-filter: blur(14px);
      background: rgba(7,3,17,.55);
      border-bottom: 1px solid var(--line);
    }
    .nav{
      display:flex; align-items:center; justify-content:space-between;
      padding: 14px 0;
      gap:14px;
    }

    .brand{display:flex; align-items:center; gap:12px; user-select:none}
    .logo{
      width:42px; height:42px; border-radius: 16px;
      background:
        radial-gradient(120% 120% at 20% 20%, rgba(255,59,212,.95), rgba(122,92,255,.65) 52%, rgba(47,233,255,.50));
      border: 1px solid rgba(255,255,255,.14);
      box-shadow: 0 18px 60px rgba(255,59,212,.12);
      position:relative;
      overflow:hidden;
    }
    .logo:after{
      content:"";
      position:absolute; inset:-40%;
      background: linear-gradient(45deg, transparent, rgba(255,255,255,.35), transparent);
      transform: rotate(20deg) translateX(-40%);
      animation: shine 4.6s ease-in-out infinite;
      opacity:.7;
    }
    @keyframes shine{
      0%,35%{transform: rotate(20deg) translateX(-40%); opacity:.0}
      45%{opacity:.85}
      60%{transform: rotate(20deg) translateX(55%); opacity:.0}
      100%{opacity:0}
    }
    .brand strong{font-size:14px; letter-spacing:.2px}
    .brand span{display:block; font-size:12px; color:var(--muted2); margin-top:1px}

    .navlinks{display:flex; align-items:center; gap:18px}
    .navlinks a{
      font-size:13px; color:var(--muted);
      padding:8px 10px; border-radius:12px;
      transition:.25s ease;
      border:1px solid transparent;
    }
    .navlinks a:hover{
      color:var(--text);
      background: rgba(255,255,255,.05);
      border-color: rgba(255,255,255,.12);
    }

    .actions{display:flex; align-items:center; gap:10px}
    .btn{
      appearance:none;
      border:1px solid rgba(255,255,255,.14);
      background: rgba(255,255,255,.06);
      color: var(--text);
      padding:10px 12px;
      border-radius: 16px;
      cursor:pointer;
      transition:.22s ease;
      display:inline-flex; align-items:center; gap:10px;
      font-size:13px;
      box-shadow: 0 12px 40px rgba(0,0,0,.22);
    }
    .btn:hover{transform: translateY(-1px); background: rgba(255,255,255,.08); border-color: rgba(255,255,255,.22)}
    .btn:active{transform: translateY(0); opacity:.95}

    .btn.primary{
      border-color: rgba(255,59,212,.34);
      background:
        radial-gradient(120% 120% at 25% 25%, rgba(255,255,255,.10), transparent 60%),
        linear-gradient(135deg, rgba(255,59,212,.22), rgba(122,92,255,.22));
      box-shadow:
        0 18px 70px rgba(122,92,255,.12),
        0 12px 40px rgba(0,0,0,.25);
    }

    .pill{
      font-size:12px;
      border:1px solid rgba(255,255,255,.14);
      background: rgba(255,255,255,.06);
      padding:8px 10px;
      border-radius:999px;
      display:inline-flex; align-items:center; gap:8px;
      color: rgba(255,255,255,.86);
    }
    .kbd{
      font-family: var(--mono);
      font-size:11px;
      padding:2px 6px;
      border-radius:8px;
      background: rgba(255,255,255,.08);
      border:1px solid rgba(255,255,255,.12);
      color: rgba(255,255,255,.86);
    }
    .badge{
      min-width:22px; height:22px; padding:0 7px;
      border-radius:999px;
      display:inline-flex; align-items:center; justify-content:center;
      font-size:12px;
      background: rgba(255,255,255,.10);
      border:1px solid rgba(255,255,255,.14);
    }
    .badge.hot{
      background: rgba(255,59,212,.18);
      border-color: rgba(255,59,212,.30);
    }
    .icon{width:16px; height:16px; display:inline-block}

    /* Mobile */
    .hamb{display:none}
    .mobile-panel{
      display:none;
      border-top:1px solid var(--line);
      padding: 10px 0 16px;
    }
    .mobile-panel a{
      display:block;
      padding:10px 10px;
      border-radius:12px;
      color: var(--muted);
      border:1px solid transparent;
      transition:.25s ease;
      margin-top:6px;
    }
    .mobile-panel a:hover{color:var(--text); background: rgba(255,255,255,.06); border-color: rgba(255,255,255,.12)}
    .mobile-actions{display:flex; gap:10px; margin-top:10px; flex-wrap:wrap}

    /* Hero */
    .hero{position:relative; padding: 58px 0 24px}
    .hero-grid{
      display:grid;
      grid-template-columns: 1.2fr .8fr;
      gap: 20px;
      align-items:stretch;
    }
    .hero-card{
      border-radius: var(--r28);
      background:
        radial-gradient(120% 120% at 18% 10%, rgba(255,59,212,.18), transparent 55%),
        radial-gradient(120% 120% at 90% 25%, rgba(122,92,255,.18), transparent 55%),
        rgba(255,255,255,.05);
      border:1px solid rgba(255,255,255,.14);
      box-shadow: var(--shadow);
      overflow:hidden;
      position:relative;
    }
    .hero-card:before{
      content:"";
      position:absolute; inset:-2px;
      background:
        linear-gradient(90deg, rgba(255,59,212,.22), rgba(122,92,255,.20), rgba(47,233,255,.16));
      filter: blur(14px);
      opacity:.35;
      z-index:0;
    }
    .hero-card .inner{padding: 26px; position:relative; z-index:1}

    .tagline{display:flex; gap:10px; flex-wrap:wrap; margin-bottom:14px}
    .tag{
      border-radius:999px;
      padding:8px 10px;
      font-size:12px;
      color: rgba(255,255,255,.88);
      border:1px solid rgba(255,255,255,.14);
      background: rgba(0,0,0,.12);
      backdrop-filter: blur(10px);
      display:inline-flex; align-items:center; gap:8px;
    }

    h1{
      font-size: clamp(30px, 4.6vw, 48px);
      line-height: 1.03;
      margin: 10px 0 10px;
      letter-spacing:-.9px;
    }
    .lead{
      font-size: 15px;
      line-height: 1.55;
      color: var(--muted);
      max-width: 62ch;
      margin: 0 0 18px;
    }
    .hero-cta{display:flex; gap:12px; flex-wrap:wrap; align-items:center}
    .hero-cta .btn{padding: 12px 14px; border-radius: 18px}
    .mini-row{
      display:flex; gap:14px; flex-wrap:wrap;
      margin-top: 16px;
      color: var(--muted2);
      font-size: 12.5px;
    }
    .mini-row b{color: rgba(255,255,255,.88); font-weight:700}
    .divider{
      height:1px;
      background: linear-gradient(90deg, transparent, rgba(255,255,255,.16), transparent);
      margin: 18px 0;
      opacity:.9;
    }

    /* 4D fruit ‚Äúpeel‚Äù showcase */
    .lab{
      border-radius: var(--r28);
      background:
        radial-gradient(120% 120% at 20% 15%, rgba(47,233,255,.14), transparent 60%),
        radial-gradient(120% 120% at 80% 25%, rgba(255,176,32,.14), transparent 60%),
        rgba(255,255,255,.04);
      border:1px solid rgba(255,255,255,.12);
      box-shadow: 0 16px 60px rgba(0,0,0,.35);
      overflow:hidden;
      position:relative;
      padding: 14px;
      display:flex;
      flex-direction:column;
      gap:12px;
    }

    .peel-stage{
      min-height: 290px;
      border-radius: 24px;
      border:1px solid rgba(255,255,255,.12);
      background:
        radial-gradient(80% 80% at 30% 25%, rgba(255,59,212,.18), transparent 58%),
        radial-gradient(80% 80% at 75% 40%, rgba(122,92,255,.16), transparent 60%),
        radial-gradient(80% 80% at 55% 85%, rgba(46,233,166,.12), transparent 60%),
        rgba(255,255,255,.03);
      position:relative;
      overflow:hidden;
    }

    .fruit{
      position:absolute;
      left:50%; top:52%;
      transform: translate(-50%,-50%);
      width: 210px; height: 210px;
      border-radius: 999px;
      background:
        radial-gradient(circle at 30% 28%, rgba(255,255,255,.30), transparent 45%),
        radial-gradient(circle at 45% 55%, rgba(255,255,255,.10), transparent 58%),
        radial-gradient(circle at 60% 65%, rgba(0,0,0,.14), transparent 58%),
        linear-gradient(135deg, rgba(255,176,32,.90), rgba(255,59,212,.72));
      box-shadow:
        0 30px 120px rgba(255,59,212,.10),
        0 24px 90px rgba(0,0,0,.38);
      border: 1px solid rgba(255,255,255,.14);
    }

    .fruit:after{
      content:"";
      position:absolute; inset: 18px;
      border-radius: 999px;
      background:
        radial-gradient(circle at 30% 30%, rgba(255,255,255,.18), transparent 40%),
        linear-gradient(135deg, rgba(255,255,255,.10), rgba(0,0,0,.06));
      border: 1px solid rgba(255,255,255,.10);
      opacity:.65;
    }

    /* Peel layer (animated ‚Äúpeel back‚Äù) */
    .peel{
      position:absolute;
      left:50%; top:52%;
      transform: translate(-50%,-50%);
      width: 230px; height: 230px;
      border-radius: 999px;
      background:
        radial-gradient(circle at 35% 35%, rgba(255,255,255,.22), transparent 45%),
        linear-gradient(135deg, rgba(46,233,166,.55), rgba(47,233,255,.35));
      border: 1px solid rgba(255,255,255,.14);
      box-shadow: 0 20px 70px rgba(0,0,0,.30);
      clip-path: polygon(0 0, 100% 0, 100% 100%, 0 100%);
      animation: peel 2.9s ease-in-out infinite;
      opacity:.85;
      filter: saturate(1.06);
    }
    @keyframes peel{
      0%,100%{
        clip-path: polygon(0 0, 100% 0, 100% 100%, 0 100%);
        transform: translate(-50%,-50%) rotate(0deg);
      }
      50%{
        clip-path: polygon(0 0, 70% 0, 100% 55%, 0 100%);
        transform: translate(-50%,-50%) rotate(-6deg);
      }
    }

    .gummy-dots{
      position:absolute; inset:0;
      background-image:
        radial-gradient(rgba(255,255,255,.08) 1px, transparent 1px);
      background-size: 18px 18px;
      opacity:.35;
      mask-image: radial-gradient(circle at 50% 50%, black 50%, transparent 75%);
    }

    .lab-cards{display:grid; gap:10px}
    .mini-card{
      border-radius: 18px;
      border:1px solid rgba(255,255,255,.12);
      background: rgba(255,255,255,.04);
      padding: 14px;
    }
    .mini-card h3{margin:0 0 6px; font-size:14px}
    .mini-card p{margin:0; color:var(--muted); font-size:13px; line-height:1.5}

    /* Sections */
    section{padding: 42px 0}
    .section-title{
      display:flex; align-items:flex-end; justify-content:space-between;
      gap: 12px; flex-wrap:wrap;
      margin-bottom: 18px;
    }
    .section-title h2{margin:0; font-size:22px; letter-spacing:-.2px}
    .section-title p{margin:0; color: var(--muted); font-size:13.5px}

    .grid3{display:grid; grid-template-columns: repeat(3, 1fr); gap: 14px}
    .grid2{display:grid; grid-template-columns: repeat(2, 1fr); gap: 14px}

    .card{
      background: rgba(255,255,255,.05);
      border:1px solid rgba(255,255,255,.12);
      border-radius: var(--r22);
      box-shadow: 0 14px 54px rgba(0,0,0,.24);
      overflow:hidden;
      position:relative;
    }
    .card .pad{padding: 16px}
    .card h3{margin:0 0 6px; font-size:14px}
    .card p{margin:0; color: var(--muted); font-size:13px; line-height:1.55}

    .meta{display:flex; gap:8px; flex-wrap:wrap; margin-top:12px}
    .chip{
      font-size:12px;
      padding:6px 8px;
      border-radius: 999px;
      border:1px solid rgba(255,255,255,.14);
      background: rgba(0,0,0,.12);
      color: rgba(255,255,255,.86);
      display:inline-flex; align-items:center; gap:8px;
      backdrop-filter: blur(10px);
    }
    .chip.dot:before{
      content:"";
      width:8px; height:8px; border-radius:99px;
      background: rgba(255,255,255,.35);
      box-shadow: 0 0 0 2px rgba(255,255,255,.08);
      display:inline-block;
    }
    .chip.pink.dot:before{background: rgba(255,59,212,.8)}
    .chip.purple.dot:before{background: rgba(122,92,255,.8)}
    .chip.cyan.dot:before{background: rgba(47,233,255,.8)}
    .chip.lime.dot:before{background: rgba(46,233,166,.8)}
    .chip.mango.dot:before{background: rgba(255,176,32,.85)}

    /* Shop */
    .shopbar{
      display:flex; gap:10px; flex-wrap:wrap;
      align-items:center; justify-content:space-between;
      padding: 12px;
      border-radius: var(--r22);
      border:1px solid rgba(255,255,255,.12);
      background: rgba(255,255,255,.05);
      box-shadow: 0 12px 46px rgba(0,0,0,.20);
      margin-bottom: 14px;
    }
    .inputs{display:flex; gap:10px; flex-wrap:wrap; align-items:center}
    .input, select{
      background: rgba(0,0,0,.14);
      border: 1px solid rgba(255,255,255,.14);
      color: rgba(255,255,255,.90);
      padding:10px 12px;
      border-radius: 16px;
      outline:none;
      font-size:13px;
      transition: .2s ease;
      backdrop-filter: blur(10px);
    }
    .input:focus, select:focus{border-color: rgba(255,255,255,.26); background: rgba(255,255,255,.06)}
    .filters{display:flex; gap:8px; flex-wrap:wrap}
    .fbtn{
      border:1px solid rgba(255,255,255,.14);
      background: rgba(0,0,0,.12);
      color: rgba(255,255,255,.86);
      padding:8px 10px;
      border-radius: 999px;
      cursor:pointer;
      font-size:12.5px;
      transition: .2s ease;
      backdrop-filter: blur(10px);
    }
    .fbtn:hover{transform: translateY(-1px); border-color: rgba(255,255,255,.22); background: rgba(255,255,255,.06)}
    .fbtn.active{
      background:
        radial-gradient(120% 120% at 30% 30%, rgba(255,255,255,.10), transparent 60%),
        linear-gradient(135deg, rgba(255,59,212,.22), rgba(122,92,255,.22));
      border-color: rgba(255,59,212,.34);
      color: rgba(255,255,255,.95);
      box-shadow: 0 20px 70px rgba(255,59,212,.07);
    }

    .products{display:grid; grid-template-columns: repeat(3, 1fr); gap: 14px}

    /* Product image = gummy blob */
    .pimg{
      height: 176px;
      border-bottom: 1px solid rgba(255,255,255,.10);
      background:
        radial-gradient(100px 100px at 25% 30%, rgba(255,255,255,.18), transparent 60%),
        radial-gradient(260px 220px at 70% 50%, rgba(255,59,212,.20), transparent 60%),
        radial-gradient(240px 220px at 45% 80%, rgba(47,233,255,.14), transparent 62%),
        rgba(255,255,255,.04);
      position:relative;
      overflow:hidden;
    }

    .blob{
      position:absolute;
      left:50%; top:50%;
      width: 140px; height: 140px;
      transform: translate(-50%,-50%) rotate(10deg);
      border-radius: 46% 54% 58% 42% / 52% 48% 52% 48%;
      background:
        radial-gradient(circle at 30% 28%, rgba(255,255,255,.22), transparent 45%),
        linear-gradient(135deg, rgba(255,59,212,.55), rgba(122,92,255,.45), rgba(47,233,255,.30));
      border:1px solid rgba(255,255,255,.14);
      box-shadow: 0 28px 90px rgba(0,0,0,.25);
      animation: wobble 5.4s ease-in-out infinite;
      filter: saturate(1.06);
    }
    @keyframes wobble{
      0%,100%{border-radius:46% 54% 58% 42% / 52% 48% 52% 48%; transform: translate(-50%,-50%) rotate(10deg)}
      50%{border-radius:52% 48% 44% 56% / 46% 54% 50% 50%; transform: translate(-50%,-50%) rotate(-8deg)}
    }

    .pimg .label{position:absolute; top:12px; left:12px; display:flex; gap:8px; align-items:center}

    .flag{
      font-size:12px;
      padding:6px 8px;
      border-radius:999px;
      border:1px solid rgba(255,255,255,.16);
      background: rgba(0,0,0,.14);
      color: rgba(255,255,255,.90);
      backdrop-filter: blur(10px);
    }
    .flag.hot{border-color: rgba(255,59,212,.36); background: rgba(255,59,212,.10)}
    .flag.new{border-color: rgba(46,233,166,.36); background: rgba(46,233,166,.08)}
    .flag.best{border-color: rgba(255,176,32,.36); background: rgba(255,176,32,.08)}

    .row{display:flex; align-items:center; justify-content:space-between; gap:12px; margin-top:12px}
    .price{font-weight:800; letter-spacing:-.2px}
    .small{font-size:12.5px; color:var(--muted)}
    .stars{font-size:12px; color: rgba(255,255,255,.80)}

    .qty{
      display:flex; align-items:center; gap:8px;
      border:1px solid rgba(255,255,255,.14);
      background: rgba(0,0,0,.12);
      border-radius: 999px;
      padding: 6px 8px;
      backdrop-filter: blur(10px);
    }
    .qty button{
      width:26px; height:26px;
      border-radius:999px;
      border:1px solid rgba(255,255,255,.12);
      background: rgba(255,255,255,.06);
      color: rgba(255,255,255,.94);
      cursor:pointer;
      transition:.2s ease;
    }
    .qty button:hover{background: rgba(255,255,255,.08); transform: translateY(-1px)}
    .qty input{
      width:36px;
      background: transparent;
      border:none;
      color: rgba(255,255,255,.92);
      text-align:center;
      outline:none;
      font-size:13px;
    }

    /* FAQ */
    details{
      border:1px solid rgba(255,255,255,.12);
      border-radius: 18px;
      background: rgba(255,255,255,.05);
      padding: 12px 14px;
      backdrop-filter: blur(10px);
    }
    details summary{
      cursor:pointer;
      font-weight:800;
      color: rgba(255,255,255,.90);
      list-style:none;
    }
    details summary::-webkit-details-marker{display:none}
    details p{margin:10px 0 0; color: var(--muted); font-size:13px; line-height:1.55}

    /* Footer */
    footer{
      border-top:1px solid var(--line);
      padding: 26px 0 40px;
      background: rgba(0,0,0,.14);
      backdrop-filter: blur(12px);
    }
    .footer-grid{
      display:grid;
      grid-template-columns: 1.3fr 1fr 1fr;
      gap: 14px;
      align-items:start;
    }
    .footer-grid h4{margin:0 0 10px; font-size:13px}
    .footer-grid a{display:block; color: var(--muted); font-size:13px; padding:6px 0}
    .footer-grid a:hover{color: var(--text)}
    .fineprint{margin-top: 18px; color: var(--muted2); font-size:12.5px; line-height:1.5}
    .hr{height:1px; background: rgba(255,255,255,.10); margin: 14px 0}

    /* Modal cart */
    .overlay{
      position:fixed; inset:0;
      background: rgba(0,0,0,.56);
      display:none;
      align-items:center; justify-content:center;
      z-index:80;
      padding: 22px;
    }
    .overlay.show{display:flex}
    .modal{
      width:min(880px, 100%);
      border-radius: 24px;
      background: rgba(12,8,26,.92);
      border: 1px solid rgba(255,255,255,.16);
      box-shadow: 0 24px 100px rgba(0,0,0,.68);
      backdrop-filter: blur(18px);
      overflow:hidden;
    }
    .modal-head{
      display:flex; align-items:center; justify-content:space-between;
      padding: 14px 16px;
      border-bottom:1px solid rgba(255,255,255,.12);
    }
    .modal-head strong{font-size:14px}
    .x{
      border-radius: 16px;
      border:1px solid rgba(255,255,255,.16);
      background: rgba(255,255,255,.06);
      padding: 10px 12px;
      cursor:pointer;
      color: rgba(255,255,255,.92);
    }
    .modal-body{display:grid; grid-template-columns: 1.2fr .8fr; gap: 0}
    .cartlist{padding: 14px 16px}
    .cartitem{
      display:grid;
      grid-template-columns: 1fr auto;
      gap: 10px;
      padding: 12px;
      border:1px solid rgba(255,255,255,.12);
      border-radius: 18px;
      background: rgba(255,255,255,.05);
      margin-bottom: 10px;
    }
    .cartitem h5{margin:0 0 4px; font-size:13px}
    .cartitem .mini{color: var(--muted); font-size:12.5px}
    .cartitem .tools{display:flex; gap:8px; align-items:center; justify-content:flex-end}
    .cartitem .tools button{
      border-radius: 14px;
      border:1px solid rgba(255,255,255,.14);
      background: rgba(255,255,255,.06);
      color: rgba(255,255,255,.92);
      padding: 8px 10px;
      cursor:pointer;
      font-size:12px;
    }
    .cartitem .tools button:hover{background: rgba(255,255,255,.08)}
    .cart-summary{
      padding: 14px 16px;
      border-left:1px solid rgba(255,255,255,.12);
      background: rgba(255,255,255,.03);
    }
    .sumrow{display:flex; justify-content:space-between; gap:10px; margin:10px 0; color: var(--muted)}
    .sumrow b{color: rgba(255,255,255,.92)}
    .total{
      display:flex; justify-content:space-between; align-items:center;
      padding: 12px;
      border-radius: 18px;
      border:1px solid rgba(255,255,255,.14);
      background:
        radial-gradient(120% 120% at 25% 25%, rgba(255,255,255,.08), transparent 60%),
        linear-gradient(135deg, rgba(255,59,212,.16), rgba(122,92,255,.16));
      margin-top: 12px;
    }
    .total strong{font-size:14px}
    .note{color: var(--muted2); font-size:12.5px; line-height:1.5; margin-top:10px}

    .toast{
      position: fixed;
      bottom: 18px; left: 50%;
      transform: translateX(-50%);
      background: rgba(20,12,34,.92);
      border:1px solid rgba(255,255,255,.16);
      color: rgba(255,255,255,.92);
      padding: 10px 12px;
      border-radius: 999px;
      box-shadow: 0 16px 70px rgba(0,0,0,.55);
      display:none;
      z-index:90;
      backdrop-filter: blur(14px);
      font-size:13px;
    }
    .toast.show{display:block; animation: toastIn .25s ease}
    @keyframes toastIn{from{opacity:0; transform:translateX(-50%) translateY(10px)} to{opacity:1; transform:translateX(-50%) translateY(0)}}

    /* Reveal */
    .reveal{opacity:0; transform: translateY(14px); transition: .6s ease}
    .reveal.on{opacity:1; transform: translateY(0)}

    /* Responsive */
    @media (max-width: 980px){
      .hero-grid{grid-template-columns: 1fr}
      .products{grid-template-columns: repeat(2, 1fr)}
      .grid3{grid-template-columns: 1fr}
      .grid2{grid-template-columns: 1fr}
      .footer-grid{grid-template-columns: 1fr}
      .modal-body{grid-template-columns: 1fr}
      .cart-summary{border-left:none; border-top:1px solid rgba(255,255,255,.12)}
      .navlinks{display:none}
      .hamb{display:inline-flex}
      header.open .mobile-panel{display:block}
    }
    @media (max-width: 560px){
      .products{grid-template-columns: 1fr}
      .hero-card .inner{padding: 18px}
    }
  </style>
</head>

<body>
  <div class="bubble b1" style="--s:1.1"></div>
  <div class="bubble b2" style="--s:.95"></div>
  <div class="bubble b3" style="--s:1.25"></div>
  <div class="bubble b4" style="--s:.85"></div>

  <header id="top">
    <div class="container">
      <div class="nav">
        <a class="brand" href="#top" aria-label="Home">
          <div class="logo" aria-hidden="true"></div>
          <div>
            <strong>4D Candy Lab</strong>
            <span>Gummy ‚Ä¢ Peel ‚Ä¢ Neon ‚Äî demo shop</span>
          </div>
        </a>

        <nav class="navlinks" aria-label="Navigazione">
          <a href="#shop">Shop</a>
          <a href="#collezioni">Collezioni</a>
          <a href="#storia">Storia</a>
          <a href="#faq">FAQ</a>
          <a href="#contatti">Contatti</a>
        </nav>

        <div class="actions">
          <span class="pill" title="Cerca">
            <span style="opacity:.9">Cerca</span> <span class="kbd">/</span>
          </span>
          <button class="btn hamb" id="hambBtn" aria-label="Apri menu">
            <svg class="icon" viewBox="0 0 24 24" fill="none"><path d="M4 7h16M4 12h16M4 17h16" stroke="currentColor" stroke-width="2" stroke-linecap="round"/></svg>
            Menu
          </button>
          <button class="btn primary" id="cartBtn" aria-label="Apri carrello">
            <svg class="icon" viewBox="0 0 24 24" fill="none"><path d="M6 7h15l-1.5 8.5a2 2 0 0 1-2 1.5H9a2 2 0 0 1-2-1.6L5 3H2" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"/><path d="M10 21a1 1 0 1 0 0-2 1 1 0 0 0 0 2ZM18 21a1 1 0 1 0 0-2 1 1 0 0 0 0 2Z" fill="currentColor"/></svg>
            Carrello <span class="badge hot" id="cartCount">0</span>
          </button>
        </div>
      </div>

      <div class="mobile-panel" id="mobilePanel" aria-label="Menu mobile">
        <a href="#shop">Shop</a>
        <a href="#collezioni">Collezioni</a>
        <a href="#storia">Storia</a>
        <a href="#faq">FAQ</a>
        <a href="#contatti">Contatti</a>
        <div class="mobile-actions">
          <button class="btn" id="scrollTopBtn">Su</button>
          <button class="btn primary" id="cartBtn2">Carrello <span class="badge hot" id="cartCount2">0</span></button>
        </div>
      </div>
    </div>
  </header>

  <main>
    <!-- HERO -->
    <section class="hero">
      <div class="container">
        <div class="hero-grid">
          <div class="hero-card reveal">
            <div class="inner">
              <div class="tagline">
                <span class="tag">üçë Effetto ‚Äúpeel‚Äù</span>
                <span class="tag">‚ú® Gummy glow</span>
                <span class="tag">‚ö° Neon pop</span>
              </div>

              <h1>Caramelle ‚Äú4D‚Äù da sbucciare. <span style="color:rgba(255,255,255,.86)">Viste prima, mangiate poi.</span></h1>
              <p class="lead">
                Template completo stile candy-viral: colori ‚Äúgel‚Äù, frutta 3D, vibe giocosa.
                Shop con filtri e carrello <b>(demo front-end)</b>.
              </p>

              <div class="hero-cta">
                <a class="btn primary" href="#shop">Vai allo shop</a>
                <button class="btn" id="randomMixBtn">Mix ‚ÄúPeel‚Äù casuale</button>
                <span class="small">Tip: premi <span class="kbd">/</span> per cercare</span>
              </div>

              <div class="divider"></div>

              <div class="mini-row">
                <span>‚úÖ <b>Box</b> regalo</span>
                <span>‚úÖ <b>Mix</b> personalizzati</span>
                <span>‚úÖ <b>UI</b> super candy</span>
              </div>
            </div>
          </div>

          <div class="lab reveal">
            <div class="peel-stage" aria-label="Vetrina peel 4D">
              <div class="gummy-dots"></div>
              <div class="fruit"></div>
              <div class="peel"></div>
            </div>

            <div class="lab-cards">
              <div class="mini-card">
                <h3>üçå ‚ÄúPeel Series‚Äù</h3>
                <p>Caramelle morbide effetto frutta: look super realistico, texture gummy.</p>
              </div>
              <div class="mini-card">
                <h3>üéÅ Gift Packs</h3>
                <p>Box neon-luxury: perfette per reels, eventi e ‚Äúwow‚Äù immediato.</p>
              </div>
            </div>
          </div>

        </div>
      </div>
    </section>

    <!-- COLLEZIONI -->
    <section id="collezioni">
      <div class="container">
        <div class="section-title">
          <div>
            <h2>Collezioni</h2>
            <p><b>Pi√π pop</b>, pi√π gummy, pi√π ‚Äúviral shelf‚Äù.</p>
          </div>
          <span class="pill">‚ú® Drop del mese</span>
        </div>

        <div class="grid3">
          <div class="card reveal">
            <div class="pad">
              <h3>Peel ‚Äî Tropical</h3>
              <p>Banana, mango, pesca: colori pieni e finish ‚Äúgel‚Äù.</p>
              <div class="meta">
                <span class="chip mango dot">Tropical</span>
                <span class="chip cyan dot">Fresh</span>
                <span class="chip">Gummy</span>
              </div>
            </div>
          </div>
          <div class="card reveal">
            <div class="pad">
              <h3>Peel ‚Äî Berry</h3>
              <p>Fragola e lampone: sweet + acidit√† bilanciata.</p>
              <div class="meta">
                <span class="chip pink dot">Berry</span>
                <span class="chip purple dot">Pop</span>
                <span class="chip">Wow look</span>
              </div>
            </div>
          </div>
          <div class="card reveal">
            <div class="pad">
              <h3>Neon Box</h3>
              <p>Mix regalo con ‚Äúgummy gems‚Äù + peel.</p>
              <div class="meta">
                <span class="chip lime dot">Gift</span>
                <span class="chip mango dot">Best</span>
                <span class="chip">Unboxing</span>
              </div>
            </div>
          </div>
        </div>
      </div>
    </section>

    <!-- SHOP -->
    <section id="shop">
      <div class="container">
        <div class="section-title">
          <div>
            <h2>Shop</h2>
            <p>Filtri + ricerca + carrello. <b>(Demo)</b></p>
          </div>
          <span class="pill">üç¨ Gummy UI</span>
        </div>

        <div class="shopbar reveal">
          <div class="inputs">
            <input class="input" id="search" type="search" placeholder="Cerca: peel, mango, berry..." />
            <select id="sort">
              <option value="featured">Consigliati</option>
              <option value="priceAsc">Prezzo crescente</option>
              <option value="priceDesc">Prezzo decrescente</option>
              <option value="rating">Valutazione</option>
            </select>
          </div>
          <div class="filters">
            <button class="fbtn active" data-filter="all">Tutte</button>
            <button class="fbtn" data-filter="peel">Peel</button>
            <button class="fbtn" data-filter="gummy">Gummy</button>
            <button class="fbtn" data-filter="sour">Sour</button>
            <button class="fbtn" data-filter="box">Box</button>
          </div>
        </div>

        <div class="products" id="products"></div>
      </div>
    </section>

    <!-- STORY -->
    <section id="storia">
      <div class="container">
        <div class="section-title">
          <div>
            <h2>Storia</h2>
            <p>Concept ‚Äúcandy lab‚Äù: estetica 4D + UX pronta per e-commerce vero.</p>
          </div>
          <span class="pill">üß™ Lab</span>
        </div>

        <div class="grid2">
          <div class="card reveal">
            <div class="pad">
              <h3>Perch√© ‚Äú4D‚Äù?</h3>
              <p>Qui lo stile punta a: <b>frutta realistica</b>, texture gummy, luci neon e componenti ‚Äúfun‚Äù.</p>
              <div class="meta">
                <span class="chip cyan dot">Glow</span>
                <span class="chip pink dot">Pop</span>
                <span class="chip">Viral</span>
              </div>
            </div>
          </div>

          <div class="card reveal">
            <div class="pad">
              <h3>Da demo a shop reale</h3>
              <p>Carrello e UI sono gi√† pronti. Manca solo backend (prodotti, ordini, pagamenti).</p>
              <div class="meta">
                <span class="chip purple dot">Stripe</span>
                <span class="chip lime dot">DB</span>
                <span class="chip mango dot">CMS</span>
              </div>
            </div>
          </div>
        </div>
      </div>
    </section>

    <!-- FAQ -->
    <section id="faq">
      <div class="container">
        <div class="section-title">
          <div>
            <h2>FAQ</h2>
            <p>Le classiche domande da candy shop.</p>
          </div>
          <span class="pill">üí¨</span>
        </div>

        <div class="grid2">
          <details class="reveal">
            <summary>Sono ‚Äúda sbucciare‚Äù davvero?</summary>
            <p>Demo UI: qui lo comunichi come concept di prodotto (effetto peel/fruit). Per uno shop reale, inserisci descrizione e ingredienti.</p>
          </details>
          <details class="reveal">
            <summary>√à un e-commerce funzionante?</summary>
            <p>No: carrello e filtri funzionano localmente, ma non ci sono pagamenti/ordini (da collegare a backend).</p>
          </details>
          <details class="reveal">
            <summary>Posso creare un mix?</summary>
            <p>S√¨: il tasto mix casuale simula l‚Äôidea. In produzione fai un configuratore (gusti + quantit√†).</p>
          </details>
          <details class="reveal">
            <summary>Spedizioni e resi?</summary>
            <p>Placeholder: aggiungi policy vere e tracking quando lo colleghi a un corriere.</p>
          </details>
        </div>
      </div>
    </section>

    <!-- CONTATTI -->
    <section id="contatti">
      <div class="container">
        <div class="section-title">
          <div>
            <h2>Contatti</h2>
            <p>Modulo demo + newsletter.</p>
          </div>
          <span class="pill">‚úâÔ∏è</span>
        </div>

        <div class="grid2">
          <div class="card reveal">
            <div class="pad">
              <h3>Scrivici</h3>
              <p class="small" style="margin-bottom:12px">Demo: mostra un toast. Collega un endpoint reale quando vuoi.</p>
              <form id="contactForm">
                <div style="display:grid; gap:10px">
                  <input class="input" name="name" placeholder="Nome" required />
                  <input class="input" type="email" name="email" placeholder="Email" required />
                  <input class="input" name="topic" placeholder="Oggetto" required />
                  <textarea class="input" name="msg" rows="5" placeholder="Messaggio" style="resize:vertical; border-radius:18px" required></textarea>
                  <button class="btn primary" type="submit">Invia</button>
                </div>
              </form>
            </div>
          </div>

          <div class="card reveal">
            <div class="pad">
              <h3>Newsletter</h3>
              <p>Drop nuovi, box limited, colori fuori di testa. Solo roba bella.</p>
              <div class="meta">
                <span class="chip pink dot">Drop</span>
                <span class="chip cyan dot">Peel</span>
                <span class="chip lime dot">Gift</span>
              </div>
              <div class="hr"></div>
              <form id="newsForm" style="display:flex; gap:10px; flex-wrap:wrap">
                <input class="input" type="email" name="email" placeholder="La tua email" required />
                <button class="btn" type="submit">Iscriviti</button>
              </form>
              <p class="fineprint">Nota: in produzione aggiungi consenso privacy + link informativa.</p>
            </div>
          </div>
        </div>
      </div>
    </section>
  </main>

  <footer>
    <div class="container">
      <div class="footer-grid">
        <div>
          <div class="brand" style="margin-bottom:10px">
            <div class="logo" aria-hidden="true"></div>
            <div>
              <strong>4D Candy Lab</strong>
              <span>Neon gummy UI ‚Ä¢ demo</span>
            </div>
          </div>
          <p class="fineprint">Template pronto per diventare shop reale: API prodotti + Stripe + database.</p>
        </div>
        <div>
          <h4>Esplora</h4>
          <a href="#shop">Shop</a>
          <a href="#collezioni">Collezioni</a>
          <a href="#storia">Storia</a>
          <a href="#faq">FAQ</a>
        </div>
        <div>
          <h4>Legale (placeholder)</h4>
          <a href="#top" onclick="toast('Placeholder: Privacy Policy')">Privacy</a>
          <a href="#top" onclick="toast('Placeholder: Cookie Policy')">Cookie</a>
          <a href="#top" onclick="toast('Placeholder: Termini')">Termini</a>
        </div>
      </div>
      <div class="hr"></div>
      <div class="fineprint">¬© <span id="year"></span> 4D Candy Lab ‚Ä¢ Demo</div>
    </div>
  </footer>

  <!-- CART MODAL -->
  <div class="overlay" id="overlay" aria-hidden="true">
    <div class="modal" role="dialog" aria-modal="true" aria-label="Carrello">
      <div class="modal-head">
        <strong>Carrello (demo)</strong>
        <button class="x" id="closeCart">Chiudi</button>
      </div>
      <div class="modal-body">
        <div class="cartlist" id="cartList"></div>
        <div class="cart-summary">
          <div class="sumrow"><span>Subtotale</span><b id="subtot">‚Ç¨0,00</b></div>
          <div class="sumrow"><span>Spedizione</span><b id="ship">‚Ç¨0,00</b></div>
          <div class="sumrow"><span>Sconto</span><b id="disc">‚Ç¨0,00</b></div>
          <div class="total"><span style="color:var(--muted)">Totale</span><strong id="total">‚Ç¨0,00</strong></div>
          <button class="btn primary" style="width:100%; justify-content:center; margin-top:12px" id="checkoutBtn">Procedi (demo)</button>
          <p class="note">Checkout demo: collega Stripe/PayPal + ordini.</p>
        </div>
      </div>
    </div>
  </div>

  <div class="toast" id="toast" role="status" aria-live="polite"></div>

  <script>
    const PRODUCTS = [
      {id:"p1", name:"Peel ‚Äî Banana Pop", cat:"peel", tags:["banana","tropical","peel"], price:7.90, rating:4.8, badge:"best", desc:"Effetto banana: gummy morbida, super realistico."},
      {id:"p2", name:"Peel ‚Äî Mango Twist", cat:"peel", tags:["mango","tropical","peel"], price:8.20, rating:4.7, badge:"hot", desc:"Mango pieno, finish gel, vibe neon."},
      {id:"p3", name:"Peel ‚Äî Peach Glow", cat:"peel", tags:["pesca","peel"], price:7.70, rating:4.6, badge:"new", desc:"Pesca soft: dolce e profumata."},

      {id:"p4", name:"Gummy Gems ‚Äî Berry Mix", cat:"gummy", tags:["berry","fragola","lampone"], price:6.90, rating:4.7, badge:"best", desc:"Gommose ‚Äúgioiello‚Äù con lucentezza extra."},
      {id:"p5", name:"Gummy Gems ‚Äî Lime Fresh", cat:"gummy", tags:["lime","fresh"], price:6.50, rating:4.5, badge:"", desc:"Acidit√† delicata e finale pulito."},

      {id:"p6", name:"Sour Splash ‚Äî Citrus Shock", cat:"sour", tags:["agrumi","sour"], price:6.20, rating:4.4, badge:"hot", desc:"Sour pop (ma non eccessivo): limone & pompelmo."},
      {id:"p7", name:"Sour Splash ‚Äî Watermelon", cat:"sour", tags:["anguria","sour"], price:6.40, rating:4.5, badge:"", desc:"Anguria sour style, super ‚Äúreel-friendly‚Äù."},

      {id:"p8", name:"Neon Box ‚Äî Peel & Gems (24pz)", cat:"box", tags:["box","gift","mix"], price:19.90, rating:4.8, badge:"best", desc:"Box regalo: peel + gummy gems, unboxing garantito."},
      {id:"p9", name:"Mini Neon Box (12pz)", cat:"box", tags:["box","gift"], price:13.90, rating:4.6, badge:"", desc:"Compatta, neon-lux: perfetta da regalare."},
    ];

    const fmtEUR = (n) => n.toLocaleString("it-IT",{style:"currency", currency:"EUR"});
    const $ = (q, el=document) => el.querySelector(q);
    const $$ = (q, el=document) => [...el.querySelectorAll(q)];

    // Mobile nav
    const header = document.querySelector("header");
    $("#hambBtn")?.addEventListener("click", () => header.classList.toggle("open"));
    $("#scrollTopBtn")?.addEventListener("click", () => window.scrollTo({top:0, behavior:"smooth"}));
    $("#cartBtn2")?.addEventListener("click", () => openCart());
    $$("#mobilePanel a").forEach(a => a.addEventListener("click", () => header.classList.remove("open")));

    // Search shortcut
    window.addEventListener("keydown", (e) => {
      if(e.key === "/" && document.activeElement?.tagName !== "INPUT" && document.activeElement?.tagName !== "TEXTAREA"){
        e.preventDefault();
        $("#search")?.focus();
      }
      if(e.key === "Escape"){
        closeCart();
        header.classList.remove("open");
      }
    });

    // State
    const state = {
      filter: "all",
      search: "",
      sort: "featured",
      cart: JSON.parse(localStorage.getItem("candy_cart") || "{}")
    };

    function setCart(id, qty){
      if(qty <= 0) delete state.cart[id];
      else state.cart[id] = qty;
      localStorage.setItem("candy_cart", JSON.stringify(state.cart));
      updateCartBadges();
      renderCart();
    }

    function cartCount(){
      return Object.values(state.cart).reduce((a,b)=>a+b,0);
    }
    function updateCartBadges(){
      const c = cartCount();
      $("#cartCount").textContent = c;
      $("#cartCount2").textContent = c;
    }

    function getVisibleProducts(){
      let items = PRODUCTS.slice();

      if(state.filter !== "all") items = items.filter(p => p.cat === state.filter);

      const s = state.search.trim().toLowerCase();
      if(s){
        items = items.filter(p =>
          p.name.toLowerCase().includes(s) ||
          p.desc.toLowerCase().includes(s) ||
          p.tags.some(t => t.toLowerCase().includes(s)) ||
          p.cat.toLowerCase().includes(s)
        );
      }

      if(state.sort === "priceAsc") items.sort((a,b)=>a.price-b.price);
      if(state.sort === "priceDesc") items.sort((a,b)=>b.price-a.price);
      if(state.sort === "rating") items.sort((a,b)=>b.rating-a.rating);
      return items;
    }

    function badgeLabel(b){
      if(b==="best") return "Best";
      if(b==="new") return "New";
      if(b==="hot") return "Hot";
      return "";
    }

    function productCard(p){
      const b = badgeLabel(p.badge);
      const flag = b ? `<span class="flag ${p.badge}">${b}</span>` : "";
      const stars = "‚òÖ‚òÖ‚òÖ‚òÖ‚òÖ".slice(0, Math.round(p.rating)) + "‚òÜ‚òÜ‚òÜ‚òÜ‚òÜ".slice(0, 5 - Math.round(p.rating));
      const qty = state.cart[p.id] || 0;

      return `
        <article class="card reveal" data-id="${p.id}">
          <div class="pimg">
            <div class="label">${flag}</div>
            <div class="blob"></div>
          </div>
          <div class="pad">
            <h3 style="margin:0 0 6px">${p.name}</h3>
            <p>${p.desc}</p>
            <div class="row">
              <div>
                <div class="price">${fmtEUR(p.price)}</div>
                <div class="stars">${stars} <span class="small">(${p.rating.toFixed(1)})</span></div>
              </div>
              <div style="display:flex; gap:10px; align-items:center; flex-wrap:wrap; justify-content:flex-end">
                <span class="chip">${p.cat}</span>
                <div class="qty">
                  <button type="button" class="dec">‚àí</button>
                  <input inputmode="numeric" pattern="[0-9]*" value="${qty}" />
                  <button type="button" class="inc">+</button>
                </div>
              </div>
            </div>
          </div>
        </article>
      `;
    }

    function renderProducts(){
      const wrap = $("#products");
      const items = getVisibleProducts();

      wrap.innerHTML = items.length
        ? items.map(productCard).join("")
        : `<div class="card reveal" style="grid-column:1/-1"><div class="pad"><h3>Nessun prodotto</h3><p>Prova ‚Äúpeel‚Äù, ‚Äúmango‚Äù, ‚Äúbox‚Äù.</p></div></div>`;

      $$(".products .card").forEach(card => {
        const id = card.getAttribute("data-id");
        const input = $("input", card);
        $(".inc", card).addEventListener("click", () => setCart(id, (state.cart[id]||0)+1));
        $(".dec", card).addEventListener("click", () => setCart(id, (state.cart[id]||0)-1));
        input.addEventListener("change", () => {
          const v = Math.max(0, Math.min(99, parseInt(input.value || "0",10) || 0));
          input.value = v;
          setCart(id, v);
        });
      });

      observeReveal();
    }

    // Filters / search / sort
    $$(".fbtn").forEach(btn => {
      btn.addEventListener("click", () => {
        $$(".fbtn").forEach(b => b.classList.remove("active"));
        btn.classList.add("active");
        state.filter = btn.dataset.filter;
        renderProducts();
      });
    });
    $("#search").addEventListener("input", (e) => { state.search = e.target.value; renderProducts(); });
    $("#sort").addEventListener("change", (e) => { state.sort = e.target.value; renderProducts(); });

    // Cart
    const overlay = $("#overlay");
    function openCart(){ overlay.classList.add("show"); overlay.setAttribute("aria-hidden","false"); renderCart(); }
    function closeCart(){ overlay.classList.remove("show"); overlay.setAttribute("aria-hidden","true"); }

    $("#cartBtn").addEventListener("click", openCart);
    $("#closeCart").addEventListener("click", closeCart);
    overlay.addEventListener("click", (e) => { if(e.target === overlay) closeCart(); });

    function renderCart(){
      const list = $("#cartList");
      const entries = Object.entries(state.cart)
        .map(([id,qty]) => ({p: PRODUCTS.find(x=>x.id===id), qty}))
        .filter(x => x.p && x.qty>0);

      if(!entries.length){
        list.innerHTML = `
          <div class="cartitem">
            <div>
              <h5>Carrello vuoto</h5>
              <div class="mini">Aggiungi qualche candy üç¨</div>
            </div>
            <div class="tools">
              <button onclick="document.querySelector('#shop').scrollIntoView({behavior:'smooth'})">Vai allo shop</button>
            </div>
          </div>`;
      } else {
        list.innerHTML = entries.map(({p,qty}) => `
          <div class="cartitem">
            <div>
              <h5>${p.name}</h5>
              <div class="mini">${qty} √ó ${fmtEUR(p.price)} ‚Ä¢ <span style="color:rgba(255,255,255,.88)">${fmtEUR(qty*p.price)}</span></div>
            </div>
            <div class="tools">
              <button onclick="window.__cartDec('${p.id}')">‚àí</button>
              <button onclick="window.__cartInc('${p.id}')">+</button>
              <button onclick="window.__cartRemove('${p.id}')">Rimuovi</button>
            </div>
          </div>`).join("");
      }

      const subtotal = entries.reduce((s,{p,qty}) => s + p.price*qty, 0);
      const shipping = subtotal === 0 ? 0 : (subtotal >= 29 ? 0 : 4.90);
      const discount = subtotal >= 40 ? 5.00 : 0;
      const total = Math.max(0, subtotal + shipping - discount);

      $("#subtot").textContent = fmtEUR(subtotal);
      $("#ship").textContent = fmtEUR(shipping);
      $("#disc").textContent = fmtEUR(discount);
      $("#total").textContent = fmtEUR(total);
    }
    window.__cartInc = (id) => setCart(id, (state.cart[id]||0)+1);
    window.__cartDec = (id) => setCart(id, (state.cart[id]||0)-1);
    window.__cartRemove = (id) => setCart(id, 0);

    $("#checkoutBtn").addEventListener("click", () => {
      if(cartCount() === 0) return toast("Aggiungi un prodotto prima üëÄ");
      toast("Checkout demo: qui colleghi Stripe ‚úÖ");
    });

    // Random mix
    $("#randomMixBtn").addEventListener("click", () => {
      const picks = PRODUCTS.slice().sort(() => Math.random() - 0.5).slice(0, 3);
      picks.forEach(p => setCart(p.id, (state.cart[p.id]||0)+1));
      toast("Mix ‚ÄúPeel‚Äù aggiunto ‚ú®");
      openCart();
    });

    // Forms demo
    $("#contactForm").addEventListener("submit", (e) => { e.preventDefault(); toast("Messaggio inviato (demo) ‚úÖ"); e.target.reset(); });
    $("#newsForm").addEventListener("submit", (e) => { e.preventDefault(); toast("Iscrizione completata (demo) ‚ú®"); e.target.reset(); });

    // Toast
    const toastEl = $("#toast");
    let toastT = null;
    function toast(msg){
      toastEl.textContent = msg;
      toastEl.classList.add("show");
      clearTimeout(toastT);
      toastT = setTimeout(() => toastEl.classList.remove("show"), 2400);
    }
    window.toast = toast;

    // Reveal
    let observer;
    function observeReveal(){
      if(observer) observer.disconnect();
      observer = new IntersectionObserver((entries) => {
        entries.forEach(en => {
          if(en.isIntersecting){
            en.target.classList.add("on");
            observer.unobserve(en.target);
          }
        });
      }, {threshold: 0.12});
      $$(".reveal:not(.on)").forEach(el => observer.observe(el));
    }

    // Init
    $("#year").textContent = new Date().getFullYear();
    updateCartBadges();
    renderProducts();
    renderCart();
    observeReveal();
  </script>
</body>
</html>
