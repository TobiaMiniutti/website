<!doctype html>
<html lang="it">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>DolceViva ‚Äî Caramelle Artigianali</title>
  <meta name="description" content="DolceViva: caramelle artigianali, gommose, dure e ripiene. Ingredienti selezionati, design premium, spedizione rapida." />
  <meta name="theme-color" content="#0b0b10" />

  <style>
    :root{
      --bg:#07070b;
      --bg2:#0b0b10;
      --card: rgba(255,255,255,.06);
      --card2: rgba(255,255,255,.09);
      --text: rgba(255,255,255,.92);
      --muted: rgba(255,255,255,.68);
      --muted2: rgba(255,255,255,.52);
      --line: rgba(255,255,255,.10);
      --shadow: 0 18px 60px rgba(0,0,0,.55);
      --radius: 18px;
      --radius2: 26px;
      --accent1:#ff4fd8;
      --accent2:#7c5cff;
      --accent3:#2ee9a6;
      --accent4:#ffb020;
      --ok:#2ee9a6;
      --warn:#ffb020;
      --danger:#ff4f4f;
      --font: ui-sans-serif, system-ui, -apple-system, Segoe UI, Roboto, Helvetica, Arial, "Apple Color Emoji","Segoe UI Emoji";
      --mono: ui-monospace, SFMono-Regular, Menlo, Monaco, Consolas, "Liberation Mono", "Courier New", monospace;
    }

    *{box-sizing:border-box}
    html,body{height:100%}
    body{
      margin:0;
      font-family: var(--font);
      color: var(--text);
      background:
        radial-gradient(900px 600px at 10% 10%, rgba(255,79,216,.20), transparent 60%),
        radial-gradient(700px 550px at 85% 20%, rgba(124,92,255,.18), transparent 60%),
        radial-gradient(650px 500px at 70% 85%, rgba(46,233,166,.16), transparent 60%),
        linear-gradient(180deg, var(--bg), var(--bg2));
      overflow-x:hidden;
    }

    a{color:inherit; text-decoration:none}
    .container{width:min(1120px, calc(100% - 40px)); margin-inline:auto}
    .blur-orb{
      position:absolute; inset:auto;
      filter: blur(50px);
      opacity:.8; pointer-events:none;
      transform: translateZ(0);
    }
    .orb1{width:280px; height:280px; background: rgba(255,79,216,.35); top:110px; left:-90px; border-radius:999px}
    .orb2{width:320px; height:320px; background: rgba(124,92,255,.30); top:-50px; right:-120px; border-radius:999px}
    .orb3{width:260px; height:260px; background: rgba(46,233,166,.26); bottom:120px; right:-90px; border-radius:999px}

    /* Header */
    header{
      position:sticky; top:0; z-index:50;
      backdrop-filter: blur(14px);
      background: rgba(7,7,11,.55);
      border-bottom: 1px solid var(--line);
    }
    .nav{
      display:flex; align-items:center; justify-content:space-between;
      padding: 14px 0;
      gap:14px;
    }
    .brand{
      display:flex; align-items:center; gap:12px;
      letter-spacing:.2px;
      user-select:none;
    }
    .logo{
      width:40px; height:40px; border-radius: 14px;
      background:
        radial-gradient(120% 120% at 20% 20%, rgba(255,79,216,.95), rgba(124,92,255,.65) 50%, rgba(46,233,166,.60));
      box-shadow: 0 10px 28px rgba(0,0,0,.45);
      position:relative;
      overflow:hidden;
    }
    .logo:after{
      content:"";
      position:absolute; inset:-40%;
      background: linear-gradient(45deg, transparent, rgba(255,255,255,.35), transparent);
      transform: rotate(20deg) translateX(-40%);
      animation: shine 5.4s ease-in-out infinite;
      opacity:.7;
    }
    @keyframes shine{
      0%,35%{transform: rotate(20deg) translateX(-40%); opacity:.0}
      45%{opacity:.85}
      60%{transform: rotate(20deg) translateX(55%); opacity:.0}
      100%{opacity:0}
    }
    .brand strong{font-size:14px}
    .brand span{display:block; font-size:12px; color:var(--muted2); margin-top:1px}

    .navlinks{
      display:flex; align-items:center; gap:18px;
    }
    .navlinks a{
      font-size:13px; color: var(--muted);
      padding:8px 10px; border-radius:12px;
      transition: .25s ease;
      border: 1px solid transparent;
    }
    .navlinks a:hover{
      color: var(--text);
      background: rgba(255,255,255,.05);
      border-color: rgba(255,255,255,.10);
    }

    .actions{display:flex; align-items:center; gap:10px}
    .btn{
      appearance:none; border:1px solid rgba(255,255,255,.12);
      background: rgba(255,255,255,.06);
      color: var(--text);
      padding:10px 12px;
      border-radius: 14px;
      cursor:pointer;
      transition: .25s ease;
      display:inline-flex; align-items:center; gap:10px;
      font-size:13px;
      box-shadow: 0 8px 26px rgba(0,0,0,.25);
    }
    .btn:hover{transform: translateY(-1px); background: rgba(255,255,255,.08); border-color: rgba(255,255,255,.18)}
    .btn:active{transform: translateY(0px); opacity:.95}
    .btn.primary{
      border-color: rgba(255,79,216,.30);
      background: linear-gradient(135deg, rgba(255,79,216,.18), rgba(124,92,255,.18));
    }
    .pill{
      font-size:12px;
      color: rgba(255,255,255,.82);
      border:1px solid rgba(255,255,255,.12);
      background: rgba(255,255,255,.06);
      padding:8px 10px;
      border-radius: 999px;
      display:inline-flex; align-items:center; gap:8px;
    }
    .kbd{
      font-family: var(--mono);
      font-size:11px;
      padding:2px 6px;
      border-radius:8px;
      background: rgba(255,255,255,.08);
      border: 1px solid rgba(255,255,255,.10);
      color: rgba(255,255,255,.82);
    }
    .icon{width:16px; height:16px; display:inline-block}
    .badge{
      min-width:22px; height:22px; padding:0 7px;
      border-radius:999px;
      display:inline-flex; align-items:center; justify-content:center;
      font-size:12px;
      background: rgba(255,255,255,.10);
      border:1px solid rgba(255,255,255,.14);
      color: rgba(255,255,255,.92);
    }
    .badge.hot{
      background: rgba(255,79,216,.18);
      border-color: rgba(255,79,216,.30);
    }

    /* Mobile nav */
    .hamb{display:none}
    .mobile-panel{
      display:none;
      border-top:1px solid var(--line);
      padding: 10px 0 16px;
    }
    .mobile-panel a{
      display:block;
      padding:10px 10px;
      border-radius:12px;
      color: var(--muted);
      border:1px solid transparent;
      transition:.25s ease;
      margin-top:6px;
    }
    .mobile-panel a:hover{color:var(--text); background: rgba(255,255,255,.05); border-color: rgba(255,255,255,.10)}
    .mobile-actions{display:flex; gap:10px; margin-top:10px; flex-wrap:wrap}

    /* Hero */
    .hero{
      position:relative;
      padding: 58px 0 24px;
    }
    .hero-grid{
      display:grid;
      grid-template-columns: 1.2fr .8fr;
      gap: 28px;
      align-items:stretch;
    }
    .hero-card{
      border-radius: var(--radius2);
      background: linear-gradient(180deg, rgba(255,255,255,.08), rgba(255,255,255,.03));
      border:1px solid rgba(255,255,255,.12);
      box-shadow: var(--shadow);
      overflow:hidden;
      position:relative;
    }
    .hero-card .inner{
      padding: 28px;
    }
    .tagline{
      display:flex; gap:10px; flex-wrap:wrap;
      margin-bottom:14px;
    }
    .tag{
      border-radius:999px;
      padding:8px 10px;
      font-size:12px;
      color: rgba(255,255,255,.85);
      border:1px solid rgba(255,255,255,.12);
      background: rgba(255,255,255,.05);
      display:inline-flex; align-items:center; gap:8px;
    }
    h1{
      font-size: clamp(30px, 4.4vw, 46px);
      line-height: 1.04;
      margin: 10px 0 10px;
      letter-spacing:-.8px;
    }
    .lead{
      font-size: 15px;
      line-height: 1.55;
      color: var(--muted);
      max-width: 60ch;
      margin: 0 0 18px;
    }
    .hero-cta{display:flex; gap:12px; flex-wrap:wrap; align-items:center}
    .hero-cta .btn{padding: 12px 14px; border-radius: 16px}
    .hero-cta .btn.primary{box-shadow: 0 14px 60px rgba(124,92,255,.16)}
    .mini-row{
      display:flex; gap:14px; flex-wrap:wrap;
      margin-top: 18px;
      color: var(--muted2);
      font-size: 12.5px;
    }
    .mini-row b{color: rgba(255,255,255,.86); font-weight:600}
    .divider{
      height:1px;
      background: linear-gradient(90deg, transparent, rgba(255,255,255,.14), transparent);
      margin: 18px 0;
      opacity:.9;
    }

    /* Candy showcase */
    .candy-box{
      height:100%;
      display:flex;
      flex-direction:column;
      gap:12px;
      padding: 18px;
    }
    .candy-visual{
      border-radius: 22px;
      background:
        radial-gradient(80% 80% at 30% 20%, rgba(255,79,216,.20), transparent 60%),
        radial-gradient(80% 80% at 80% 35%, rgba(124,92,255,.18), transparent 62%),
        radial-gradient(80% 80% at 55% 85%, rgba(46,233,166,.14), transparent 60%),
        rgba(255,255,255,.04);
      border: 1px solid rgba(255,255,255,.10);
      overflow:hidden;
      position:relative;
      min-height: 280px;
    }
    .candy-grid{
      position:absolute; inset:0;
      display:grid;
      grid-template-columns: repeat(8, 1fr);
      grid-auto-rows: 1fr;
      gap: 12px;
      padding: 18px;
      opacity:.95;
    }
    .c{
      border-radius: 18px;
      border:1px solid rgba(255,255,255,.10);
      background: rgba(255,255,255,.06);
      box-shadow: 0 14px 40px rgba(0,0,0,.25);
      transform: translateY(0);
      transition: transform .35s ease, filter .35s ease, opacity .35s ease;
      position:relative;
      overflow:hidden;
    }
    .c:before{
      content:"";
      position:absolute; inset:-40%;
      background: linear-gradient(45deg, transparent, rgba(255,255,255,.32), transparent);
      transform: rotate(18deg) translateX(-30%);
      opacity:.0;
      transition: opacity .3s ease;
    }
    .c:hover{transform: translateY(-4px) rotate(-.2deg); filter: saturate(1.06)}
    .c:hover:before{opacity:.8}
    .c.pink{background: radial-gradient(120% 120% at 25% 20%, rgba(255,79,216,.50), rgba(255,255,255,.06) 60%)}
    .c.purple{background: radial-gradient(120% 120% at 25% 20%, rgba(124,92,255,.48), rgba(255,255,255,.06) 60%)}
    .c.mint{background: radial-gradient(120% 120% at 25% 20%, rgba(46,233,166,.46), rgba(255,255,255,.06) 60%)}
    .c.gold{background: radial-gradient(120% 120% at 25% 20%, rgba(255,176,32,.46), rgba(255,255,255,.06) 60%)}

    .c.one{grid-column: 1 / span 3; grid-row: 1 / span 3}
    .c.two{grid-column: 4 / span 2; grid-row: 1 / span 2}
    .c.three{grid-column: 6 / span 3; grid-row: 1 / span 4}
    .c.four{grid-column: 4 / span 2; grid-row: 3 / span 3}
    .c.five{grid-column: 1 / span 3; grid-row: 4 / span 3}
    .c.six{grid-column: 4 / span 5; grid-row: 6 / span 2}

    .side-card{
      border-radius: 22px;
      background: rgba(255,255,255,.04);
      border:1px solid rgba(255,255,255,.10);
      padding: 16px;
    }
    .side-card h3{margin:0 0 8px; font-size:14px}
    .side-card p{margin:0; color:var(--muted); font-size:13px; line-height:1.5}
    .side-rows{display:grid; gap:10px}

    /* Sections */
    section{padding: 42px 0}
    .section-title{
      display:flex; align-items:flex-end; justify-content:space-between;
      gap: 12px; flex-wrap:wrap;
      margin-bottom: 18px;
    }
    .section-title h2{
      margin:0;
      font-size: 22px;
      letter-spacing:-.2px;
    }
    .section-title p{margin:0; color: var(--muted); font-size:13.5px}

    .grid3{display:grid; grid-template-columns: repeat(3, 1fr); gap: 14px}
    .grid2{display:grid; grid-template-columns: repeat(2, 1fr); gap: 14px}
    .card{
      background: rgba(255,255,255,.04);
      border:1px solid rgba(255,255,255,.10);
      border-radius: var(--radius);
      box-shadow: 0 12px 44px rgba(0,0,0,.25);
      overflow:hidden;
      position:relative;
    }
    .card .pad{padding: 16px}
    .card h3{margin:0 0 6px; font-size:14px}
    .card p{margin:0; color: var(--muted); font-size:13px; line-height:1.55}
    .card .meta{display:flex; gap:8px; flex-wrap:wrap; margin-top:12px}
    .chip{
      font-size:12px;
      padding:6px 8px;
      border-radius: 999px;
      border:1px solid rgba(255,255,255,.12);
      background: rgba(255,255,255,.05);
      color: rgba(255,255,255,.82);
      display:inline-flex; align-items:center; gap:8px;
    }
    .chip.dot:before{
      content:"";
      width:8px; height:8px; border-radius:99px;
      background: rgba(255,255,255,.35);
      box-shadow: 0 0 0 2px rgba(255,255,255,.08);
      display:inline-block;
    }
    .chip.pink.dot:before{background: rgba(255,79,216,.7)}
    .chip.purple.dot:before{background: rgba(124,92,255,.7)}
    .chip.mint.dot:before{background: rgba(46,233,166,.7)}
    .chip.gold.dot:before{background: rgba(255,176,32,.7)}

    /* Shop */
    .shopbar{
      display:flex; gap:10px; flex-wrap:wrap;
      align-items:center; justify-content:space-between;
      padding: 12px;
      border-radius: var(--radius);
      border:1px solid rgba(255,255,255,.10);
      background: rgba(255,255,255,.04);
      box-shadow: 0 10px 38px rgba(0,0,0,.2);
      margin-bottom: 14px;
    }
    .inputs{display:flex; gap:10px; flex-wrap:wrap; align-items:center}
    .input, select{
      background: rgba(255,255,255,.05);
      border: 1px solid rgba(255,255,255,.12);
      color: rgba(255,255,255,.88);
      padding:10px 12px;
      border-radius: 14px;
      outline:none;
      font-size:13px;
      transition: .2s ease;
    }
    .input:focus, select:focus{border-color: rgba(255,255,255,.22); background: rgba(255,255,255,.07)}
    .filters{display:flex; gap:8px; flex-wrap:wrap}
    .fbtn{
      border:1px solid rgba(255,255,255,.12);
      background: rgba(255,255,255,.05);
      color: rgba(255,255,255,.82);
      padding:8px 10px;
      border-radius: 999px;
      cursor:pointer;
      font-size:12.5px;
      transition: .2s ease;
    }
    .fbtn:hover{transform: translateY(-1px); border-color: rgba(255,255,255,.18); background: rgba(255,255,255,.07)}
    .fbtn.active{
      background: linear-gradient(135deg, rgba(255,79,216,.18), rgba(124,92,255,.18));
      border-color: rgba(255,79,216,.30);
      color: rgba(255,255,255,.92);
    }

    .products{
      display:grid;
      grid-template-columns: repeat(3, 1fr);
      gap: 14px;
    }
    .pimg{
      height: 170px;
      border-bottom: 1px solid rgba(255,255,255,.10);
      background:
        radial-gradient(110% 110% at 25% 25%, rgba(255,255,255,.10), transparent 60%),
        rgba(255,255,255,.04);
      position:relative;
      overflow:hidden;
    }
    .pimg .swirl{
      position:absolute; inset:-30%;
      background:
        radial-gradient(circle at 30% 30%, rgba(255,79,216,.45), transparent 55%),
        radial-gradient(circle at 70% 40%, rgba(124,92,255,.40), transparent 58%),
        radial-gradient(circle at 55% 70%, rgba(46,233,166,.34), transparent 60%);
      filter: blur(18px);
      transform: rotate(10deg);
      opacity:.9;
    }
    .pimg .label{
      position:absolute; top:12px; left:12px;
      display:flex; gap:8px; align-items:center;
    }
    .flag{
      font-size:12px;
      padding:6px 8px;
      border-radius:999px;
      border:1px solid rgba(255,255,255,.14);
      background: rgba(0,0,0,.18);
      color: rgba(255,255,255,.88);
      backdrop-filter: blur(10px);
    }
    .flag.hot{border-color: rgba(255,79,216,.35); background: rgba(255,79,216,.10)}
    .flag.new{border-color: rgba(46,233,166,.35); background: rgba(46,233,166,.08)}
    .flag.best{border-color: rgba(255,176,32,.35); background: rgba(255,176,32,.08)}
    .price{
      font-weight:700;
      letter-spacing:-.2px;
    }
    .row{
      display:flex; align-items:center; justify-content:space-between; gap:12px;
      margin-top: 12px;
    }
    .small{font-size:12.5px; color: var(--muted)}
    .stars{font-size:12px; color: rgba(255,255,255,.78)}
    .qty{
      display:flex; align-items:center; gap:8px;
      border:1px solid rgba(255,255,255,.12);
      background: rgba(255,255,255,.04);
      border-radius: 999px;
      padding: 6px 8px;
    }
    .qty button{
      width:26px; height:26px;
      border-radius:999px;
      border:1px solid rgba(255,255,255,.10);
      background: rgba(255,255,255,.06);
      color: rgba(255,255,255,.92);
      cursor:pointer;
      transition:.2s ease;
    }
    .qty button:hover{background: rgba(255,255,255,.08); transform: translateY(-1px)}
    .qty input{
      width:36px;
      background: transparent;
      border:none;
      color: rgba(255,255,255,.9);
      text-align:center;
      outline:none;
      font-size:13px;
    }

    /* Story + FAQ */
    details{
      border:1px solid rgba(255,255,255,.10);
      border-radius: 16px;
      background: rgba(255,255,255,.04);
      padding: 12px 14px;
    }
    details summary{
      cursor:pointer;
      font-weight:600;
      color: rgba(255,255,255,.88);
      list-style:none;
    }
    details summary::-webkit-details-marker{display:none}
    details p{margin:10px 0 0; color: var(--muted); font-size:13px; line-height:1.55}

    /* Footer */
    footer{
      border-top:1px solid var(--line);
      padding: 26px 0 40px;
      background: rgba(0,0,0,.18);
      backdrop-filter: blur(10px);
    }
    .footer-grid{
      display:grid;
      grid-template-columns: 1.3fr 1fr 1fr;
      gap: 14px;
      align-items:start;
    }
    .footer-grid h4{margin:0 0 10px; font-size:13px}
    .footer-grid a{display:block; color: var(--muted); font-size:13px; padding:6px 0}
    .footer-grid a:hover{color: var(--text)}
    .fineprint{margin-top: 18px; color: var(--muted2); font-size:12.5px; line-height:1.5}
    .hr{height:1px; background: rgba(255,255,255,.10); margin: 14px 0}

    /* Modal cart */
    .overlay{
      position:fixed; inset:0;
      background: rgba(0,0,0,.55);
      display:none;
      align-items:center; justify-content:center;
      z-index:80;
      padding: 22px;
    }
    .overlay.show{display:flex}
    .modal{
      width:min(860px, 100%);
      border-radius: 22px;
      background: rgba(10,10,14,.92);
      border: 1px solid rgba(255,255,255,.14);
      box-shadow: 0 22px 90px rgba(0,0,0,.65);
      backdrop-filter: blur(16px);
      overflow:hidden;
    }
    .modal-head{
      display:flex; align-items:center; justify-content:space-between;
      padding: 14px 16px;
      border-bottom:1px solid rgba(255,255,255,.12);
    }
    .modal-head strong{font-size:14px}
    .x{
      border-radius: 14px;
      border:1px solid rgba(255,255,255,.14);
      background: rgba(255,255,255,.06);
      padding: 10px 12px;
      cursor:pointer;
      color: rgba(255,255,255,.9);
    }
    .modal-body{
      display:grid;
      grid-template-columns: 1.2fr .8fr;
      gap: 0;
    }
    .cartlist{padding: 14px 16px}
    .cartitem{
      display:grid;
      grid-template-columns: 1fr auto;
      gap: 10px;
      padding: 12px;
      border:1px solid rgba(255,255,255,.10);
      border-radius: 16px;
      background: rgba(255,255,255,.04);
      margin-bottom: 10px;
    }
    .cartitem h5{margin:0 0 4px; font-size:13px}
    .cartitem .mini{color: var(--muted); font-size:12.5px}
    .cartitem .tools{display:flex; gap:8px; align-items:center; justify-content:flex-end}
    .cartitem .tools button{
      border-radius: 12px;
      border:1px solid rgba(255,255,255,.12);
      background: rgba(255,255,255,.06);
      color: rgba(255,255,255,.9);
      padding: 8px 10px;
      cursor:pointer;
      font-size:12px;
    }
    .cartitem .tools button:hover{background: rgba(255,255,255,.08)}
    .cart-summary{
      padding: 14px 16px;
      border-left:1px solid rgba(255,255,255,.12);
      background: rgba(255,255,255,.02);
    }
    .sumrow{display:flex; justify-content:space-between; gap:10px; margin:10px 0; color: var(--muted)}
    .sumrow b{color: rgba(255,255,255,.9)}
    .total{
      display:flex; justify-content:space-between; align-items:center;
      padding: 12px;
      border-radius: 16px;
      border:1px solid rgba(255,255,255,.12);
      background: rgba(255,255,255,.05);
      margin-top: 12px;
    }
    .total strong{font-size:14px}
    .note{color: var(--muted2); font-size:12.5px; line-height:1.5; margin-top:10px}
    .toast{
      position: fixed;
      bottom: 18px; left: 50%;
      transform: translateX(-50%);
      background: rgba(20,20,26,.92);
      border:1px solid rgba(255,255,255,.14);
      color: rgba(255,255,255,.9);
      padding: 10px 12px;
      border-radius: 999px;
      box-shadow: 0 16px 60px rgba(0,0,0,.55);
      display:none;
      z-index:90;
      backdrop-filter: blur(14px);
      font-size:13px;
    }
    .toast.show{display:block; animation: toastIn .25s ease}
    @keyframes toastIn{from{opacity:0; transform:translateX(-50%) translateY(8px)} to{opacity:1; transform:translateX(-50%) translateY(0)}}

    /* Reveal animations */
    .reveal{opacity:0; transform: translateY(14px); transition: .6s ease}
    .reveal.on{opacity:1; transform: translateY(0)}
    .fade{opacity:.0; transition:.6s ease}
    .fade.on{opacity:1}

    /* Responsive */
    @media (max-width: 980px){
      .hero-grid{grid-template-columns: 1fr}
      .products{grid-template-columns: repeat(2, 1fr)}
      .grid3{grid-template-columns: 1fr}
      .grid2{grid-template-columns: 1fr}
      .footer-grid{grid-template-columns: 1fr}
      .modal-body{grid-template-columns: 1fr}
      .cart-summary{border-left:none; border-top:1px solid rgba(255,255,255,.12)}
      .navlinks{display:none}
      .hamb{display:inline-flex}
      .mobile-panel{display:none}
      header.open .mobile-panel{display:block}
    }
    @media (max-width: 560px){
      .products{grid-template-columns: 1fr}
      .hero-card .inner{padding: 18px}
      .candy-grid{gap:10px}
    }
  </style>
</head>

<body>
  <div class="blur-orb orb1"></div>
  <div class="blur-orb orb2"></div>
  <div class="blur-orb orb3"></div>

  <header id="top">
    <div class="container">
      <div class="nav">
        <a class="brand" href="#top" aria-label="Home DolceViva">
          <div class="logo" aria-hidden="true"></div>
          <div>
            <strong>DolceViva</strong>
            <span>Caramelle premium ‚Ä¢ Artigianali ‚Ä¢ Italian vibe</span>
          </div>
        </a>

        <nav class="navlinks" aria-label="Navigazione principale">
          <a href="#shop">Shop</a>
          <a href="#collezioni">Collezioni</a>
          <a href="#storia">Storia</a>
          <a href="#faq">FAQ</a>
          <a href="#contatti">Contatti</a>
        </nav>

        <div class="actions">
          <span class="pill" title="Suggerimento">
            <span style="opacity:.9">Cerca</span>
            <span class="kbd">/</span>
          </span>
          <button class="btn hamb" id="hambBtn" aria-label="Apri menu">
            <svg class="icon" viewBox="0 0 24 24" fill="none"><path d="M4 7h16M4 12h16M4 17h16" stroke="currentColor" stroke-width="2" stroke-linecap="round"/></svg>
            Menu
          </button>
          <button class="btn primary" id="cartBtn" aria-label="Apri carrello">
            <svg class="icon" viewBox="0 0 24 24" fill="none"><path d="M6 7h15l-1.5 8.5a2 2 0 0 1-2 1.5H9a2 2 0 0 1-2-1.6L5 3H2" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"/><path d="M10 21a1 1 0 1 0 0-2 1 1 0 0 0 0 2ZM18 21a1 1 0 1 0 0-2 1 1 0 0 0 0 2Z" fill="currentColor"/></svg>
            Carrello
            <span class="badge hot" id="cartCount">0</span>
          </button>
        </div>
      </div>

      <div class="mobile-panel" id="mobilePanel" aria-label="Menu mobile">
        <a href="#shop">Shop</a>
        <a href="#collezioni">Collezioni</a>
        <a href="#storia">Storia</a>
        <a href="#faq">FAQ</a>
        <a href="#contatti">Contatti</a>
        <div class="mobile-actions">
          <button class="btn" id="scrollTopBtn">
            <svg class="icon" viewBox="0 0 24 24" fill="none"><path d="M12 5l7 7M12 5l-7 7" stroke="currentColor" stroke-width="2" stroke-linecap="round"/><path d="M12 5v14" stroke="currentColor" stroke-width="2" stroke-linecap="round"/></svg>
            Su
          </button>
          <button class="btn primary" id="cartBtn2">
            <svg class="icon" viewBox="0 0 24 24" fill="none"><path d="M6 7h15l-1.5 8.5a2 2 0 0 1-2 1.5H9a2 2 0 0 1-2-1.6L5 3H2" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"/></svg>
            Carrello <span class="badge hot" id="cartCount2">0</span>
          </button>
        </div>
      </div>
    </div>
  </header>

  <main>
    <!-- HERO -->
    <section class="hero">
      <div class="container">
        <div class="hero-grid">
          <div class="hero-card reveal">
            <div class="inner">
              <div class="tagline">
                <span class="tag">
                  <svg class="icon" viewBox="0 0 24 24" fill="none"><path d="M20 7l-8-4-8 4v10l8 4 8-4V7Z" stroke="currentColor" stroke-width="2" stroke-linejoin="round"/></svg>
                  Ingredienti selezionati
                </span>
                <span class="tag">
                  <svg class="icon" viewBox="0 0 24 24" fill="none"><path d="M12 3v18M3 12h18" stroke="currentColor" stroke-width="2" stroke-linecap="round"/></svg>
                  Mix personalizzati
                </span>
                <span class="tag">
                  <svg class="icon" viewBox="0 0 24 24" fill="none"><path d="M4 12s3-7 8-7 8 7 8 7-3 7-8 7-8-7-8-7Z" stroke="currentColor" stroke-width="2"/><path d="M12 15a3 3 0 1 0 0-6 3 3 0 0 0 0 6Z" fill="currentColor"/></svg>
                  Design premium
                </span>
              </div>

              <h1>Caramelle che sembrano gioielli. <span style="color:rgba(255,255,255,.85)">E sanno di felicit√†.</span></h1>
              <p class="lead">
                DolceViva √® un concept-store: collezioni curate (gommose, dure, ripiene) con sapori puliti,
                packaging elegante e mix ‚Äúregalo pronto‚Äù. Carrello demo incluso.
              </p>

              <div class="hero-cta">
                <a class="btn primary" href="#shop">
                  <svg class="icon" viewBox="0 0 24 24" fill="none"><path d="M7 7h14l-1.2 7.4a2 2 0 0 1-2 1.6H10a2 2 0 0 1-2-1.7L6 3H3" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"/></svg>
                  Vai allo shop
                </a>
                <button class="btn" id="randomMixBtn">
                  <svg class="icon" viewBox="0 0 24 24" fill="none"><path d="M16 3h5v5" stroke="currentColor" stroke-width="2" stroke-linecap="round"/><path d="M4 20l7-7" stroke="currentColor" stroke-width="2" stroke-linecap="round"/><path d="M21 8c-8 0-8 13-17 13" stroke="currentColor" stroke-width="2" stroke-linecap="round"/></svg>
                  Mix casuale
                </button>
                <span class="small">Tip: premi <span class="kbd">/</span> per cercare</span>
              </div>

              <div class="divider"></div>

              <div class="mini-row">
                <span>‚úÖ <b>Spedizione</b> 24/48h (demo)</span>
                <span>‚úÖ <b>Resi</b> 14 giorni (demo)</span>
                <span>‚úÖ <b>Assistenza</b> via email (demo)</span>
              </div>
            </div>
          </div>

          <div class="candy-box">
            <div class="candy-visual reveal" aria-label="Vetrina caramelle">
              <div class="candy-grid">
                <div class="c one pink" title="Raspberry Glow"></div>
                <div class="c two gold" title="Honey Spark"></div>
                <div class="c three purple" title="Grape Velvet"></div>
                <div class="c four mint" title="Mint Prism"></div>
                <div class="c five gold" title="Citrus Gold"></div>
                <div class="c six pink" title="Strawberry Pop"></div>
              </div>
            </div>

            <div class="side-rows">
              <div class="side-card reveal">
                <h3>‚ú® Collezioni stagionali</h3>
                <p>Edizioni limitate: agrumi invernali, frutti rossi, menta ‚Äúclean‚Äù e ripieni cremosi.</p>
              </div>
              <div class="side-card reveal">
                <h3>üéÅ Regalo pronto</h3>
                <p>Box minimal con effetto satinato: perfette per eventi, compleanni, e ‚Äúgrazie‚Äù.</p>
              </div>
            </div>
          </div>

        </div>
      </div>
    </section>

    <!-- COLLEZIONI -->
    <section id="collezioni">
      <div class="container">
        <div class="section-title">
          <div>
            <h2>Collezioni</h2>
            <p><b>3 linee</b> pensate per gusti diversi: texture, intensit√† e ‚Äúmood‚Äù.</p>
          </div>
          <span class="pill">
            <svg class="icon" viewBox="0 0 24 24" fill="none"><path d="M12 2l3 7h7l-5.5 4.2 2.2 7L12 16.8 5.3 20.2l2.2-7L2 9h7l3-7Z" stroke="currentColor" stroke-width="2" stroke-linejoin="round"/></svg>
            Best picks
          </span>
        </div>

        <div class="grid3">
          <div class="card reveal">
            <div class="pad">
              <h3>Gommose ‚ÄúSoft Cloud‚Äù</h3>
              <p>Morbide, fruttate, con acidit√† bilanciata. Ideali per un mix pop e moderno.</p>
              <div class="meta">
                <span class="chip pink dot">Frutti rossi</span>
                <span class="chip gold dot">Agrumi</span>
                <span class="chip">Morbidezza alta</span>
              </div>
            </div>
          </div>
          <div class="card reveal">
            <div class="pad">
              <h3>Dure ‚ÄúCrystal Drop‚Äù</h3>
              <p>Trasparenti e lucide, scioglimento lento. Perfette per gusto pulito e persistente.</p>
              <div class="meta">
                <span class="chip purple dot">Uva & viola</span>
                <span class="chip mint dot">Menta</span>
                <span class="chip">Persistenza alta</span>
              </div>
            </div>
          </div>
          <div class="card reveal">
            <div class="pad">
              <h3>Ripiene ‚ÄúCore Melt‚Äù</h3>
              <p>Guscio croccante + cuore cremoso. Il ‚Äúwow‚Äù per regali o eventi speciali.</p>
              <div class="meta">
                <span class="chip gold dot">Caramello</span>
                <span class="chip pink dot">Fragola</span>
                <span class="chip">Effetto sorpresa</span>
              </div>
            </div>
          </div>
        </div>
      </div>
    </section>

    <!-- SHOP -->
    <section id="shop">
      <div class="container">
        <div class="section-title">
          <div>
            <h2>Shop</h2>
            <p>Filtra per categoria, cerca per gusto, aggiungi al carrello. <b>(Demo front-end)</b></p>
          </div>
          <span class="pill">
            <svg class="icon" viewBox="0 0 24 24" fill="none"><path d="M3 5h18M6 12h12M10 19h4" stroke="currentColor" stroke-width="2" stroke-linecap="round"/></svg>
            Filtri smart
          </span>
        </div>

        <div class="shopbar reveal">
          <div class="inputs">
            <input class="input" id="search" type="search" placeholder="Cerca: fragola, menta, agrumi..." aria-label="Cerca prodotti" />
            <select id="sort" aria-label="Ordina">
              <option value="featured">Consigliati</option>
              <option value="priceAsc">Prezzo crescente</option>
              <option value="priceDesc">Prezzo decrescente</option>
              <option value="rating">Valutazione</option>
            </select>
          </div>
          <div class="filters" aria-label="Filtri categoria">
            <button class="fbtn active" data-filter="all">Tutte</button>
            <button class="fbtn" data-filter="gommose">Gommose</button>
            <button class="fbtn" data-filter="dure">Dure</button>
            <button class="fbtn" data-filter="ripiene">Ripiene</button>
            <button class="fbtn" data-filter="box">Box regalo</button>
          </div>
        </div>

        <div class="products" id="products"></div>
      </div>
    </section>

    <!-- STORY -->
    <section id="storia">
      <div class="container">
        <div class="section-title">
          <div>
            <h2>Storia & Filosofia</h2>
            <p>Un brand fittizio, ma un sito vero: stile, componenti, UX e performance.</p>
          </div>
          <span class="pill">
            <svg class="icon" viewBox="0 0 24 24" fill="none"><path d="M12 8v5l3 2" stroke="currentColor" stroke-width="2" stroke-linecap="round"/><path d="M12 21a9 9 0 1 0 0-18 9 9 0 0 0 0 18Z" stroke="currentColor" stroke-width="2"/></svg>
            ‚ÄúSlow craft‚Äù
          </span>
        </div>

        <div class="grid2">
          <div class="card reveal">
            <div class="pad">
              <h3>Perch√© ‚Äúpremium‚Äù?</h3>
              <p>
                Non √® solo gusto: √® anche <b>consistenza</b>, profumo, ‚Äúfinish‚Äù in bocca e packaging.
                L‚Äôesperienza √® pensata come un oggetto di design: essenziale, elegante, memorabile.
              </p>
              <div class="meta">
                <span class="chip">Texture curata</span>
                <span class="chip">Mix bilanciati</span>
                <span class="chip">Look & feel</span>
              </div>
            </div>
          </div>

          <div class="card reveal">
            <div class="pad">
              <h3>Ingredienti & trasparenza</h3>
              <p>
                In un e-commerce reale qui inseriresti: origine ingredienti, allergeni, valori nutrizionali,
                e certificazioni. In questa demo trovi struttura e UI gi√† pronte per essere collegate a un backend.
              </p>
              <div class="meta">
                <span class="chip mint dot">Info chiare</span>
                <span class="chip gold dot">Allergeni</span>
                <span class="chip purple dot">Tracciabilit√†</span>
              </div>
            </div>
          </div>
        </div>
      </div>
    </section>

    <!-- FAQ -->
    <section id="faq">
      <div class="container">
        <div class="section-title">
          <div>
            <h2>FAQ</h2>
            <p>Risposte rapide alle domande tipiche di uno shop di caramelle.</p>
          </div>
          <span class="pill">
            <svg class="icon" viewBox="0 0 24 24" fill="none"><path d="M12 18h.01" stroke="currentColor" stroke-width="3" stroke-linecap="round"/><path d="M9.5 9a2.5 2.5 0 1 1 3.2 2.4c-.9.3-1.2.8-1.2 1.6v.5" stroke="currentColor" stroke-width="2" stroke-linecap="round"/><path d="M12 22a10 10 0 1 0 0-20 10 10 0 0 0 0 20Z" stroke="currentColor" stroke-width="2"/></svg>
            Supporto
          </span>
        </div>

        <div class="grid2">
          <details class="reveal">
            <summary>Quanto dura la spedizione?</summary>
            <p>Demo: 24/48 ore lavorative. In un sito reale collegheresti tracking e carrier (SDA/BRT/DHL, ecc.).</p>
          </details>
          <details class="reveal">
            <summary>Posso scegliere un mix personalizzato?</summary>
            <p>S√¨: qui trovi il tasto ‚ÄúMix casuale‚Äù come esempio. In produzione potresti aggiungere un configuratore con gusti e quantit√†.</p>
          </details>
          <details class="reveal">
            <summary>Allergeni e ingredienti?</summary>
            <p>In una versione e-commerce reale la scheda prodotto deve includere elenco ingredienti, allergeni e valori nutrizionali (obbligatori in molti casi).</p>
          </details>
          <details class="reveal">
            <summary>√à un e-commerce funzionante?</summary>
            <p>√à una demo front-end: carrello e UI funzionano localmente, ma pagamento e ordini richiedono un backend (Stripe/PayPal + database).</p>
          </details>
        </div>
      </div>
    </section>

    <!-- CONTATTI -->
    <section id="contatti">
      <div class="container">
        <div class="section-title">
          <div>
            <h2>Contatti</h2>
            <p>Modulo demo con validazione base + newsletter.</p>
          </div>
          <span class="pill">
            <svg class="icon" viewBox="0 0 24 24" fill="none"><path d="M4 4h16v16H4V4Z" stroke="currentColor" stroke-width="2"/><path d="M22 6 12 13 2 6" stroke="currentColor" stroke-width="2" stroke-linecap="round"/></svg>
            Email
          </span>
        </div>

        <div class="grid2">
          <div class="card reveal">
            <div class="pad">
              <h3>Scrivici</h3>
              <p class="small" style="margin-bottom:12px">Compila: riceverai un toast (demo). Collega poi l‚Äôendpoint al tuo backend.</p>
              <form id="contactForm">
                <div style="display:grid; gap:10px">
                  <input class="input" name="name" placeholder="Nome e cognome" required />
                  <input class="input" type="email" name="email" placeholder="Email" required />
                  <input class="input" name="topic" placeholder="Oggetto (es. Box evento)" required />
                  <textarea class="input" name="msg" rows="5" placeholder="Messaggio" style="resize:vertical; border-radius:16px" required></textarea>
                  <button class="btn primary" type="submit">
                    <svg class="icon" viewBox="0 0 24 24" fill="none"><path d="M22 2 11 13" stroke="currentColor" stroke-width="2" stroke-linecap="round"/><path d="M22 2 15 22l-4-9-9-4 20-7Z" stroke="currentColor" stroke-width="2" stroke-linejoin="round"/></svg>
                    Invia richiesta
                  </button>
                </div>
              </form>
            </div>
          </div>

          <div class="card reveal">
            <div class="pad">
              <h3>Newsletter (demo)</h3>
              <p>Ricevi anteprime sulle collezioni e drop stagionali. Nessuno spam, solo cose belle.</p>
              <div class="meta" style="margin-top:10px">
                <span class="chip">Drop limitati</span>
                <span class="chip">Mix regalo</span>
                <span class="chip">Sconti early</span>
              </div>
              <div class="hr"></div>
              <form id="newsForm" style="display:flex; gap:10px; flex-wrap:wrap">
                <input class="input" type="email" name="email" placeholder="La tua email" required />
                <button class="btn" type="submit">Iscriviti</button>
              </form>
              <p class="fineprint">
                Nota: in produzione aggiungi <b>consenso privacy</b> e link informativa.
              </p>
              <div class="hr"></div>
              <h4 style="margin:0 0 8px; font-size:13px">Dati rapidi (demo)</h4>
              <p class="small" style="margin:0; line-height:1.6">
                üìç Bologna ‚Ä¢ Italia<br/>
                ‚è± Lun‚ÄìVen 9:00‚Äì18:00<br/>
                ‚úâÔ∏è hello@dolceviva.example
              </p>
            </div>
          </div>
        </div>
      </div>
    </section>

  </main>

  <footer>
    <div class="container">
      <div class="footer-grid">
        <div>
          <div class="brand" style="margin-bottom:10px">
            <div class="logo" aria-hidden="true"></div>
            <div>
              <strong>DolceViva</strong>
              <span>Caramelle premium ‚Ä¢ Demo UI</span>
            </div>
          </div>
          <p class="fineprint">
            Questo √® un template completo ‚Äúpronto per diventare e-commerce‚Äù: basta collegare API, pagamenti e CMS.
          </p>
        </div>

        <div>
          <h4>Esplora</h4>
          <a href="#shop">Shop</a>
          <a href="#collezioni">Collezioni</a>
          <a href="#storia">Storia</a>
          <a href="#faq">FAQ</a>
        </div>

        <div>
          <h4>Legale (placeholder)</h4>
          <a href="#top" onclick="toast('Placeholder: Privacy Policy')">Privacy Policy</a>
          <a href="#top" onclick="toast('Placeholder: Cookie Policy')">Cookie Policy</a>
          <a href="#top" onclick="toast('Placeholder: Termini e Condizioni')">Termini</a>
        </div>
      </div>

      <div class="hr"></div>
      <div class="fineprint">
        ¬© <span id="year"></span> DolceViva ‚Ä¢ UI demo ‚Ä¢ Made with sugar ‚ú®
      </div>
    </div>
  </footer>

  <!-- CART MODAL -->
  <div class="overlay" id="overlay" aria-hidden="true">
    <div class="modal" role="dialog" aria-modal="true" aria-label="Carrello">
      <div class="modal-head">
        <strong>Carrello (demo)</strong>
        <button class="x" id="closeCart" aria-label="Chiudi">Chiudi</button>
      </div>
      <div class="modal-body">
        <div class="cartlist" id="cartList"></div>
        <div class="cart-summary">
          <div class="sumrow"><span>Subtotale</span><b id="subtot">‚Ç¨0,00</b></div>
          <div class="sumrow"><span>Spedizione</span><b id="ship">‚Ç¨0,00</b></div>
          <div class="sumrow"><span>Sconto</span><b id="disc">‚Ç¨0,00</b></div>
          <div class="total">
            <span style="color:var(--muted)">Totale</span>
            <strong id="total">‚Ç¨0,00</strong>
          </div>
          <button class="btn primary" style="width:100%; justify-content:center; margin-top:12px" id="checkoutBtn">
            Procedi (demo)
          </button>
          <p class="note">
            Checkout demo: in produzione collegalo a Stripe/PayPal e a un database ordini.
          </p>
        </div>
      </div>
    </div>
  </div>

  <div class="toast" id="toast" role="status" aria-live="polite"></div>

  <script>
    // -------------------------
    // Data
    // -------------------------
    const PRODUCTS = [
      {id:"p1", name:"Soft Cloud ‚Äî Fragola & Panna", cat:"gommose", tags:["frutta","cremoso"], price:6.90, rating:4.8, badge:"best", desc:"Gommose morbide con nota lattiginosa elegante."},
      {id:"p2", name:"Soft Cloud ‚Äî Agrumi Chic", cat:"gommose", tags:["agrumi","fresh"], price:6.50, rating:4.6, badge:"new", desc:"Arancia, limone e pompelmo: acidit√† bilanciata."},
      {id:"p3", name:"Crystal Drop ‚Äî Menta Prism", cat:"dure", tags:["menta","clean"], price:5.90, rating:4.7, badge:"hot", desc:"Dure, scioglimento lento, menta pulita e persistente."},
      {id:"p4", name:"Crystal Drop ‚Äî Uva Velvet", cat:"dure", tags:["uva","floreale"], price:5.60, rating:4.5, badge:"", desc:"Uva intensa con finale morbido, stile ‚Äúvelvet‚Äù."},
      {id:"p5", name:"Core Melt ‚Äî Caramello Salato", cat:"ripiene", tags:["caramello","wow"], price:7.90, rating:4.9, badge:"best", desc:"Guscio croccante + cuore cremoso: addictive."},
      {id:"p6", name:"Core Melt ‚Äî Lampone Fondente", cat:"ripiene", tags:["lampone","fondente"], price:8.20, rating:4.7, badge:"hot", desc:"Ripiena con contrasto frutta rossa + cacao."},
      {id:"p7", name:"Gift Box ‚Äî Mix Evento (24pz)", cat:"box", tags:["regalo","mix"], price:18.90, rating:4.8, badge:"best", desc:"Box satinata, mix bilanciato, regalo pronto."},
      {id:"p8", name:"Gift Box ‚Äî Mini Luxury (12pz)", cat:"box", tags:["regalo","mini"], price:12.90, rating:4.6, badge:"", desc:"Essenziale e chic, perfetta per ‚Äúgrazie‚Äù."},
      {id:"p9", name:"Soft Cloud ‚Äî Frutti Rossi Pop", cat:"gommose", tags:["frutti rossi","pop"], price:6.70, rating:4.4, badge:"", desc:"Fragola, ciliegia e lampone: super pop."},
    ];

    const fmtEUR = (n) => n.toLocaleString("it-IT",{style:"currency", currency:"EUR"});
    const $ = (q, el=document) => el.querySelector(q);
    const $$ = (q, el=document) => [...el.querySelectorAll(q)];

    // -------------------------
    // Mobile nav
    // -------------------------
    const header = document.querySelector("header");
    $("#hambBtn")?.addEventListener("click", () => header.classList.toggle("open"));
    $("#scrollTopBtn")?.addEventListener("click", () => window.scrollTo({top:0, behavior:"smooth"}));
    $("#cartBtn2")?.addEventListener("click", () => openCart());

    // Close mobile panel on navigation click
    $$("#mobilePanel a").forEach(a => a.addEventListener("click", () => header.classList.remove("open")));

    // -------------------------
    // Search shortcut
    // -------------------------
    window.addEventListener("keydown", (e) => {
      if(e.key === "/" && document.activeElement?.tagName !== "INPUT" && document.activeElement?.tagName !== "TEXTAREA"){
        e.preventDefault();
        $("#search")?.focus();
      }
      if(e.key === "Escape"){
        closeCart();
        header.classList.remove("open");
      }
    });

    // -------------------------
    // Render products
    // -------------------------
    const state = {
      filter: "all",
      search: "",
      sort: "featured",
      cart: JSON.parse(localStorage.getItem("dv_cart") || "{}")
    };

    function setCart(id, qty){
      if(qty <= 0) delete state.cart[id];
      else state.cart[id] = qty;
      localStorage.setItem("dv_cart", JSON.stringify(state.cart));
      updateCartBadges();
      renderCart();
    }

    function cartCount(){
      return Object.values(state.cart).reduce((a,b)=>a+b,0);
    }

    function updateCartBadges(){
      const c = cartCount();
      $("#cartCount").textContent = c;
      $("#cartCount2").textContent = c;
    }

    function getVisibleProducts(){
      let items = PRODUCTS.slice();

      if(state.filter !== "all"){
        items = items.filter(p => p.cat === state.filter);
      }

      const s = state.search.trim().toLowerCase();
      if(s){
        items = items.filter(p =>
          p.name.toLowerCase().includes(s) ||
          p.desc.toLowerCase().includes(s) ||
          p.tags.some(t => t.toLowerCase().includes(s)) ||
          p.cat.toLowerCase().includes(s)
        );
      }

      if(state.sort === "priceAsc") items.sort((a,b)=>a.price-b.price);
      if(state.sort === "priceDesc") items.sort((a,b)=>b.price-a.price);
      if(state.sort === "rating") items.sort((a,b)=>b.rating-a.rating);
      // featured: keep original curated order

      return items;
    }

    function badgeLabel(b){
      if(b==="best") return "Best";
      if(b==="new") return "New";
      if(b==="hot") return "Hot";
      return "";
    }

    function productCard(p){
      const b = badgeLabel(p.badge);
      const flag = b ? `<span class="flag ${p.badge}">${b}</span>` : "";
      const stars = "‚òÖ‚òÖ‚òÖ‚òÖ‚òÖ".slice(0, Math.round(p.rating)) + "‚òÜ‚òÜ‚òÜ‚òÜ‚òÜ".slice(0, 5 - Math.round(p.rating));

      const qty = state.cart[p.id] || 0;

      return `
        <article class="card reveal" data-id="${p.id}">
          <div class="pimg">
            <div class="swirl"></div>
            <div class="label">${flag}</div>
          </div>
          <div class="pad">
            <h3 style="margin:0 0 6px">${p.name}</h3>
            <p>${p.desc}</p>
            <div class="row">
              <div>
                <div class="price">${fmtEUR(p.price)}</div>
                <div class="stars">${stars} <span class="small">(${p.rating.toFixed(1)})</span></div>
              </div>
              <div style="display:flex; gap:10px; align-items:center; flex-wrap:wrap; justify-content:flex-end">
                <span class="chip">${p.cat}</span>
                <div class="qty" aria-label="Quantit√†">
                  <button type="button" class="dec" aria-label="Diminuisci">‚àí</button>
                  <input inputmode="numeric" pattern="[0-9]*" value="${qty}" aria-label="Quantit√†" />
                  <button type="button" class="inc" aria-label="Aumenta">+</button>
                </div>
              </div>
            </div>
          </div>
        </article>
      `;
    }

    function renderProducts(){
      const wrap = $("#products");
      const items = getVisibleProducts();
      if(!items.length){
        wrap.innerHTML = `
          <div class="card reveal" style="grid-column:1/-1">
            <div class="pad">
              <h3>Nessun prodotto trovato</h3>
              <p>Prova a cambiare filtro o ricerca (es. ‚Äúmenta‚Äù, ‚Äúbox‚Äù, ‚Äúagrumi‚Äù).</p>
            </div>
          </div>
        `;
      } else {
        wrap.innerHTML = items.map(productCard).join("");
      }

      // bind qty controls
      $$(".products .card").forEach(card => {
        const id = card.getAttribute("data-id");
        const input = $("input", card);
        $(".inc", card).addEventListener("click", () => setCart(id, (state.cart[id]||0)+1));
        $(".dec", card).addEventListener("click", () => setCart(id, (state.cart[id]||0)-1));
        input.addEventListener("change", () => {
          const v = Math.max(0, Math.min(99, parseInt(input.value || "0",10) || 0));
          input.value = v;
          setCart(id, v);
        });
      });

      // re-run reveal observer on new nodes
      observeReveal();
    }

    // -------------------------
    // Filters / search / sort
    // -------------------------
    $$(".fbtn").forEach(btn => {
      btn.addEventListener("click", () => {
        $$(".fbtn").forEach(b => b.classList.remove("active"));
        btn.classList.add("active");
        state.filter = btn.dataset.filter;
        renderProducts();
      });
    });

    $("#search").addEventListener("input", (e) => {
      state.search = e.target.value;
      renderProducts();
    });

    $("#sort").addEventListener("change", (e) => {
      state.sort = e.target.value;
      renderProducts();
    });

    // -------------------------
    // Cart modal
    // -------------------------
    const overlay = $("#overlay");

    function openCart(){
      overlay.classList.add("show");
      overlay.setAttribute("aria-hidden", "false");
      renderCart();
    }
    function closeCart(){
      overlay.classList.remove("show");
      overlay.setAttribute("aria-hidden", "true");
    }

    $("#cartBtn").addEventListener("click", openCart);
    $("#closeCart").addEventListener("click", closeCart);
    overlay.addEventListener("click", (e) => {
      if(e.target === overlay) closeCart();
    });

    function renderCart(){
      const list = $("#cartList");
      const entries = Object.entries(state.cart)
        .map(([id,qty]) => ({p: PRODUCTS.find(x=>x.id===id), qty}))
        .filter(x => x.p && x.qty>0);

      if(!entries.length){
        list.innerHTML = `
          <div class="cartitem">
            <div>
              <h5>Carrello vuoto</h5>
              <div class="mini">Aggiungi qualche caramella dallo shop ‚ú®</div>
            </div>
            <div class="tools">
              <button onclick="document.querySelector('#shop').scrollIntoView({behavior:'smooth'})">Vai allo shop</button>
            </div>
          </div>
        `;
      } else {
        list.innerHTML = entries.map(({p,qty}) => `
          <div class="cartitem">
            <div>
              <h5>${p.name}</h5>
              <div class="mini">${qty} √ó ${fmtEUR(p.price)} ‚Ä¢ <span style="color:rgba(255,255,255,.82)">${fmtEUR(qty*p.price)}</span></div>
            </div>
            <div class="tools">
              <button onclick="window.__cartDec('${p.id}')">‚àí</button>
              <button onclick="window.__cartInc('${p.id}')">+</button>
              <button onclick="window.__cartRemove('${p.id}')">Rimuovi</button>
            </div>
          </div>
        `).join("");
      }

      const subtotal = entries.reduce((s,{p,qty}) => s + p.price*qty, 0);
      const shipping = subtotal === 0 ? 0 : (subtotal >= 29 ? 0 : 4.90);
      const discount = subtotal >= 40 ? 5.00 : 0;
      const total = Math.max(0, subtotal + shipping - discount);

      $("#subtot").textContent = fmtEUR(subtotal);
      $("#ship").textContent = fmtEUR(shipping);
      $("#disc").textContent = fmtEUR(discount);
      $("#total").textContent = fmtEUR(total);
    }

    window.__cartInc = (id) => setCart(id, (state.cart[id]||0)+1);
    window.__cartDec = (id) => setCart(id, (state.cart[id]||0)-1);
    window.__cartRemove = (id) => setCart(id, 0);

    $("#checkoutBtn").addEventListener("click", () => {
      const c = cartCount();
      if(c === 0) return toast("Aggiungi almeno un prodotto üëÄ");
      toast("Checkout demo: qui colleghi Stripe/PayPal ‚úÖ");
    });

    // -------------------------
    // Random mix
    // -------------------------
    $("#randomMixBtn").addEventListener("click", () => {
      const picks = PRODUCTS
        .slice()
        .sort(() => Math.random() - 0.5)
        .slice(0, 3);

      picks.forEach(p => setCart(p.id, (state.cart[p.id]||0)+1));
      toast("Mix casuale aggiunto al carrello ‚ú®");
      openCart();
    });

    // -------------------------
    // Forms (demo)
    // -------------------------
    $("#contactForm").addEventListener("submit", (e) => {
      e.preventDefault();
      toast("Messaggio inviato (demo) ‚úÖ");
      e.target.reset();
    });

    $("#newsForm").addEventListener("submit", (e) => {
      e.preventDefault();
      toast("Iscrizione completata (demo) ‚ú®");
      e.target.reset();
    });

    // -------------------------
    // Toast
    // -------------------------
    const toastEl = $("#toast");
    let toastT = null;
    function toast(msg){
      toastEl.textContent = msg;
      toastEl.classList.add("show");
      clearTimeout(toastT);
      toastT = setTimeout(() => toastEl.classList.remove("show"), 2400);
    }
    window.toast = toast;

    // -------------------------
    // Reveal on scroll
    // -------------------------
    let observer;
    function observeReveal(){
      if(observer) observer.disconnect();
      observer = new IntersectionObserver((entries) => {
        entries.forEach(en => {
          if(en.isIntersecting){
            en.target.classList.add("on");
            observer.unobserve(en.target);
          }
        });
      }, {threshold: 0.12});

      $$(".reveal:not(.on)").forEach(el => observer.observe(el));
    }

    // -------------------------
    // Init
    // -------------------------
    $("#year").textContent = new Date().getFullYear();
    updateCartBadges();
    renderProducts();
    renderCart();
    observeReveal();
  </script>
</body>
</html>
